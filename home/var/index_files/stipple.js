"undefined"===typeof STIPPLE&&(STIPPLE={},this.JSON||(this.JSON={}),function(){function n(c){return c<10?"0"+c:c}function z(h){c.lastIndex=0;return c.test(h)?'"'+h.replace(c,function(c){var h=H[c];return typeof h==="string"?h:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+h+'"'}function i(c,n){var m,q,u,B,C=h,x,l=n[c];l&&(typeof l==="object"&&typeof l.toJSON==="function")&&(l=l.toJSON(c));typeof r==="function"&&(l=r.call(n,c,l));switch(typeof l){case "string":return z(l);case "number":return isFinite(l)?
String(l):"null";case "boolean":case "null":return String(l);case "object":if(!l)return"null";h=h+t;x=[];if(Object.prototype.toString.apply(l)==="[object Array]"){B=l.length;for(m=0;m<B;m=m+1)x[m]=i(m,l)||"null";u=x.length===0?"[]":h?"[\n"+h+x.join(",\n"+h)+"\n"+C+"]":"["+x.join(",")+"]";h=C;return u}if(r&&typeof r==="object"){B=r.length;for(m=0;m<B;m=m+1){q=r[m];if(typeof q==="string")(u=i(q,l))&&x.push(z(q)+(h?": ":":")+u)}}else for(q in l)if(Object.hasOwnProperty.call(l,q))(u=i(q,l))&&x.push(z(q)+
(h?": ":":")+u);u=x.length===0?"{}":h?"{\n"+h+x.join(",\n"+h)+"\n"+C+"}":"{"+x.join(",")+"}";h=C;return u}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
h,t,H={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r;if(typeof JSON.stringify!=="function")JSON.stringify=function(c,n,m){var q;t=h="";if(typeof m==="number")for(q=0;q<m;q=q+1)t=t+" ";else typeof m==="string"&&(t=m);if((r=n)&&typeof n!=="function"&&(typeof n!=="object"||typeof n.length!=="number"))throw Error("JSON.stringify");return i("",{"":c})}}(),function(){var n=location.protocol+"//",z="stipple.com",i=15,c,h={},t,H,r=0,A,E={},m,q=null,u=true,B=true,C=false,
x,l,v=false,L,F,T,U,V,W,I,J,M,N,X,Y,O,P,Q,G,y,D,Z,$,aa,ba,ca,R,S;if(F=document.getElementById("stipple-meta-loader"))try{eval(F.content)}catch(ga){}F=function(){var c=[],b={};this.register=function(g,a){if(a){delete b[a];b[a]=g}else c.push(g)};this.execute=function(g,a){var f;for(f=0;f<c.length;f=f+1)c[f](g,a);for(f in b)if(b.hasOwnProperty(f))b[f](g,a)}};STIPPLE.callbacks={onDotCreate:{success:new F,error:new F},onDotDelete:{success:new F}};(function(){h=h||{};var c=function(c){return new Function("obj",
"var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+c.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(c,a){return"',"+a.replace(/\\'/g,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(c,a){return"');"+a.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');")};h.ajax_spinner=c('<div class="stipple-ajax-spinner-background stipple-centered" style="display: none;">\n  <img style="height: 19px; width: 19px;" src="<%= staticHostname %>/external/spinner.gif" />\n</div>\n');
h.autocomplete_add_product=c('<li class="stipple-autocomplete-item stipple-autocomplete-add-product">\n  <div class="stipple-autocomplete-add-product-prompt">Don\'t see what you are looking for?</div>\n  <%= JST.button({elementType: \'a\', link: \'#\', cssClass: "stipple-autocomplete-add-product-button", newWindow: false, text: "Add a product"}) %>\n</li>');h.autocomplete_box=c('<div class="stipple-autocomplete-box">\n  <div class="stipple-autocomplete-no-results" style="display: none;">\n    <div class="stipple-autocomplete-add-product-prompt">\n      No results for "<span class="stipple-autocomplete-no-results-search-term"></span>"\n    </div>\n    <%= JST.button({elementType: \'a\', link: \'#\', cssClass: "stipple-autocomplete-add-product-button", newWindow: false, text: "Add a product"}) %>\n  </div>\n  \n  <div class="stipple-autocomplete-ajax-loader" style="display: none;">\n    <img class="stipple-ajax-spinner" src="<%= staticHostname %>/external/spinner-white.gif" alt="ajax spinner"/>\n  </div>\n  \n  <ul class="stipple-autocomplete-items">\n\n  </ul>\n</div>');
h.autocomplete_item=c('<li class="stipple-autocomplete-item">\n  <span class="stipple-autocomplete-partial-match"><%= text.substr(0, boldLength) %></span><%= text.substr(boldLength) %>\n</li>');h.autocomplete_item_product=c('<li class="stipple-autocomplete-item stipple-autocomplete-item-product">\n  <img src="<%= data.image_url %>" class="stipple-autocomplete-product-image" />\n  <div class="stipple-autocomplete-names">\n    <div class="stipple-autocomplete-name">\n      <%= data.name %>\n    </div>\n    <div class="stipple-autocomplete-brand-name">\n      <% if (data.brand && data.brand.length) { %>\n        by <%= data.brand %>\n      <% } %>\n      <% if (data.brand && data.brand.length && data.price && data.price.length) { %>\n        &bull;\n      <% } %>\n      <% if (data.price && data.price.length) { %>\n        <%= data.price %>\n      <% } %>\n    </div>\n  </div>\n</li>');
h.button=c("<% var styleString = typeof style === 'undefined' ? '' : 'style=\"' + style + '\"'; %>\n<% if (elementType === 'input') { %>\n  <input type=\"<%= inputType %>\" class=\"<%= cssClass %> stipple-button stipple-toolbar-button\" <%= newWindow ? 'target=\"_blank\"' : '' %> value=\"<%= text %>\" <%= styleString %> />\n<% } else { %>\n  <a href=\"<%= link %>\" class=\"<%= cssClass %> stipple-button stipple-toolbar-button\" <%= newWindow ? 'target=\"_blank\"' : '' %>><%= text %></a>\n<% } %>\n");
h.call_to_action=c('<div class="stipple-call-to-action <%= visible ? "" : "stipple-hidden" %>"></div> ');h.dot=c('<div class="stipple-dot" data-stipple-creator-id="<%= creator_id %>"></div>\n');h.dot_box_button=c('<a href="<%= link %>" class="<%= cssClass %> stipple-dot-box-button" target="_stippleNewWindow" >\n  <div class="stipple-button-label"><%= label %></div>\n</a>\n');h.dot_box_edit_drawer=c('<div class="stipple-dot-box-edit-drawer" style="display: none;">\n  <div class="stipple-dot-edit-link-container">\n    <a class="stipple-dot-edit-link" href="#">Edit tag</a>\n  </div>\n  <div class="stipple-dot-delete-link-container">\n    <a class="stipple-dot-delete-link" href="#">Delete tag</a>\n  </div>\n</div>\n');
h.dot_box_edit_toggler=c('<% if (userCanEdit) { %>\n  <div class="stipple-dot-box-edit-toggler stipple-toggler-off">\n        \n  </div>\n<% } %>\n');h.dot_info=c("<% var extra_class = (typeof link_data === 'object' && link_data) ? 'stipple-dot-box-info-' + link_data.name.toLowerCase() : ''; %>\n<div class=\"stipple-dot-box stipple-dot-box-info <%= extra_class %>\">\n  <div class=\"stipple-dot-box-inner\">\n    <% if (typeof link_data === 'object' && link_data) { %>\n      <%= JST['info_dot_' + helpers.infoDotTemplateType(link_data.name)]({JST: JST, link: link, title: title, note: note, link_data: link_data, staticHostname: staticHostname}) %>\n    <% } else { %>\n      <%= JST.info_dot_content({JST: JST, link: link, title: title, note: note, link_data: null, staticHostname: staticHostname}) %>\n    <% } %>\n    <%= JST.dot_box_edit_toggler({userCanEdit: userCanEdit}) %>\n  </div>\n\n  <%= JST.dot_box_edit_drawer({}) %>\n</div>\n");
h.dot_product=c('<div class="stipple-dot-box stipple-dot-box-product" <% if (has_product) { %> data-product-id="<%= product_id %>" <% } %>>\n  <div class="stipple-dot-box-inner">\n\n    <% if (has_offer && campaigned) { %>\n      <a href="<%= buy_now_link %>" class="stipple-dot-box-popup-link" target="_stippleNewWindow" style="background-color: #FFF;">\n        <div class="stipple-product-dot-image-container">\n          <img class="stipple-product-dot-image" src="<%= image_url %>" title="<%= title %>" alt="Image for <%= title %>" />\n        </div>\n      </a>\n    <% } else { %>\n      <div class="stipple-product-dot-image-container">\n        <img class="stipple-product-dot-image" src="<%= image_url %>" title="<%= title %>" alt="Image for <%= title %>" />\n      </div>\n    <% } %>\n    \n    <div class="stipple-product-info">\n      <h1 class="stipple-dot-box-title">\n        <%= title %>\n      </h1>\n    \n      <div style="clear: both;"></div>\n      \n      <div class="stipple-price-and-links">\n        <% if (rental_price) { %>\n          <span class="stipple-price"><%= rental_price %></span>\n        <% } else if (price) { %>\n          <span class="stipple-price"><%= price %></span>\n        <% } %>\n\n        <% if (price && brand && brand.length) { %>\n          <span class="stipple-product-price-separator">&bull;</span>\n        <% } %>\n            \n        <% if (brand && brand.length) { %>\n          <span class="stipple-product-brand">By <%= brand %></span>\n        <% } %>\n            \n        <div class="stipple-product-dot-button-container">\n          <% if (buy_now_link && has_offer) { %>\n            <% var shop_text = rental_price ? "Rent" : "Shop"; %>\n            <a href="<%= buy_now_link %>" class="stipple-shop" target="_blank"><%= shop_text %></a>\n          <% } %>\n        </div>\n\n        <div style="clear: both;"></div>\n      </div>\n    </div>\n\n    <div style="clear: both;"></div>\n    <%= JST.dot_box_edit_toggler({userCanEdit: userCanEdit}) %>\n  </div>\n\n  <%= JST.dot_box_edit_drawer({}) %>\n</div>\n');
h.dot_wrapper=c('<div class="stipple-dottable-wrapper">\n</div>');h.external_css=c('<style type="text/css">\n.stipple-dot-box div,.stipple-dot-box span,.stipple-dot-box object,.stipple-dot-box iframe,.stipple-dot-box h1,.stipple-dot-box h2,.stipple-dot-box h3,.stipple-dot-box h4,.stipple-dot-box h5,.stipple-dot-box h6,.stipple-dot-box p,.stipple-dot-box pre,.stipple-dot-box a,.stipple-dot-box abbr,.stipple-dot-box acronym,.stipple-dot-box address,.stipple-dot-box code,.stipple-dot-box del,.stipple-dot-box dfn,.stipple-dot-box em,.stipple-dot-box img,.stipple-dot-box dl,.stipple-dot-box dt,.stipple-dot-box dd,.stipple-dot-box ol,.stipple-dot-box ul,.stipple-dot-box li,.stipple-dot-box fieldset,.stipple-dot-box form,.stipple-dot-box label,.stipple-dot-box legend,.stipple-dot-box caption,.stipple-dot-box tbody,.stipple-dot-box tfoot,.stipple-dot-box thead,.stipple-dot-box tr,.stipple-new-dot-container div,.stipple-new-dot-container span,.stipple-new-dot-container object,.stipple-new-dot-container iframe,.stipple-new-dot-container h1,.stipple-new-dot-container h2,.stipple-new-dot-container h3,.stipple-new-dot-container h4,.stipple-new-dot-container h5,.stipple-new-dot-container h6,.stipple-new-dot-container p,.stipple-new-dot-container pre,.stipple-new-dot-container a,.stipple-new-dot-container abbr,.stipple-new-dot-container acronym,.stipple-new-dot-container address,.stipple-new-dot-container code,.stipple-new-dot-container del,.stipple-new-dot-container dfn,.stipple-new-dot-container em,.stipple-new-dot-container img,.stipple-new-dot-container dl,.stipple-new-dot-container dt,.stipple-new-dot-container dd,.stipple-new-dot-container ol,.stipple-new-dot-container ul,.stipple-new-dot-container li,.stipple-new-dot-container fieldset,.stipple-new-dot-container form,.stipple-new-dot-container label,.stipple-new-dot-container legend,.stipple-new-dot-container caption,.stipple-new-dot-container tbody,.stipple-new-dot-container tfoot,.stipple-new-dot-container thead,.stipple-new-dot-container tr,.stipple-dottable-wrapper div,.stipple-dottable-wrapper span,.stipple-dottable-wrapper object,.stipple-dottable-wrapper iframe,.stipple-dottable-wrapper h1,.stipple-dottable-wrapper h2,.stipple-dottable-wrapper h3,.stipple-dottable-wrapper h4,.stipple-dottable-wrapper h5,.stipple-dottable-wrapper h6,.stipple-dottable-wrapper p,.stipple-dottable-wrapper pre,.stipple-dottable-wrapper a,.stipple-dottable-wrapper abbr,.stipple-dottable-wrapper acronym,.stipple-dottable-wrapper address,.stipple-dottable-wrapper code,.stipple-dottable-wrapper del,.stipple-dottable-wrapper dfn,.stipple-dottable-wrapper em,.stipple-dottable-wrapper img,.stipple-dottable-wrapper dl,.stipple-dottable-wrapper dt,.stipple-dottable-wrapper dd,.stipple-dottable-wrapper ol,.stipple-dottable-wrapper ul,.stipple-dottable-wrapper li,.stipple-dottable-wrapper fieldset,.stipple-dottable-wrapper form,.stipple-dottable-wrapper label,.stipple-dottable-wrapper legend,.stipple-dottable-wrapper caption,.stipple-dottable-wrapper tbody,.stipple-dottable-wrapper tfoot,.stipple-dottable-wrapper thead,.stipple-dottable-wrapper tr{margin:0!important;padding:0!important;border:0!important;outline:0!important;text-index:0!important;position:static;font-weight:inherit!important;font-style:inherit!important;font-size:100%!important;font-family:inherit!important;vertical-align:baseline!important;-moz-transition:all 0 ease-in 0!important;-webkit-transition:all 0 ease-in 0!important;transition:all 0 ease-in 0!important}.stipple-dot-box table,.stipple-new-dot-container table,.stipple-dottable-wrapper table{border-collapse:separate!important;border-spacing:0!important;vertical-align:middle!important}.stipple-dot-box caption,.stipple-dot-box th,.stipple-dot-box td,.stipple-new-dot-container caption,.stipple-new-dot-container th,.stipple-new-dot-container td,.stipple-dottable-wrapper caption,.stipple-dottable-wrapper th,.stipple-dottable-wrapper td{text-align:left!important;font-weight:normal!important;vertical-align:middle!important}.stipple-dot-box q,.stipple-dot-box blockquote,.stipple-new-dot-container q,.stipple-new-dot-container blockquote,.stipple-dottable-wrapper q,.stipple-dottable-wrapper blockquote{quotes:"" ""!important}.stipple-dot-box q:before,.stipple-dot-box q:after,.stipple-dot-box blockquote:before,.stipple-dot-box blockquote:after,.stipple-new-dot-container q:before,.stipple-new-dot-container q:after,.stipple-new-dot-container blockquote:before,.stipple-new-dot-container blockquote:after,.stipple-dottable-wrapper q:before,.stipple-dottable-wrapper q:after,.stipple-dottable-wrapper blockquote:before,.stipple-dottable-wrapper blockquote:after{content:""!important}.stipple-dot-box a img,.stipple-new-dot-container a img,.stipple-dottable-wrapper a img{border:none!important}div.stipple-dot,.stipple-new-dot{display:block;z-index:155000!important;width:31px!important;height:31px!important;background-image:url(//stipple.cachefly.net/production/dots/sprite.png)!important;background-position:-248px 0!important;background-repeat:no-repeat!important;background-attachment:scroll!important;background-color:transparent!important;border:none!important;padding:0!important;margin:0!important;-moz-box-shadow:none!important;-webkit-box-shadow:none!important;box-shadow:none!important;position:absolute!important}.stipple-mobile div.stipple-dot,.stipple-mobile .stipple-new-dot{width:45px!important;height:45px!important;background-image:url(//stipple.cachefly.net/production/dots/mobile/sprite.png)!important;background-position:-450px 0!important}div.stipple-dot-type-product{background-position:-279px 0!important}div.stipple-dot-type-audio{background-position:0 0!important}div.stipple-dot-type-event{background-position:-62px 0!important}div.stipple-dot-type-image{background-position:-93px 0!important}div.stipple-dot-type-info{background-position:-124px 0!important}div.stipple-dot-type-link{background-position:-155px 0!important}div.stipple-dot-type-location{background-position:-186px 0!important}div.stipple-dot-type-person{background-position:-217px 0!important}div.stipple-dot-type-video{background-position:-310px 0!important}div.stipple-dot-type-close,.stipple-dottable-wrapper .stipple-call-to-action.stipple-dot-type-close{background-position:-31px 0!important}.stipple-mobile div.stipple-dot-type-product{background-position:-495px 0!important}.stipple-mobile div.stipple-dot-type-audio{background-position:0 0!important}.stipple-mobile div.stipple-dot-type-event{background-position:-135px 0!important}.stipple-mobile div.stipple-dot-type-image{background-position:-180px 0!important}.stipple-mobile div.stipple-dot-type-info{background-position:-225px 0!important}.stipple-mobile div.stipple-dot-type-link{background-position:-270px 0!important}.stipple-mobile div.stipple-dot-type-location{background-position:-315px 0!important}.stipple-mobile div.stipple-dot-type-person{background-position:-405px 0!important}.stipple-mobile div.stipple-dot-type-video{background-position:-540px 0!important}.stipple-mobile div.stipple-dot-type-close,.stipple-mobile .stipple-dottable-wrapper .stipple-call-to-action.stipple-dot-type-close,.stipple-dottable-wrapper .stipple-mobile .stipple-call-to-action.stipple-dot-type-close,.stipple-dottable-wrapper.stipple-mobile .stipple-call-to-action.stipple-dot-type-close{background-position:-90px 0!important}.stipple-dottable-wrapper .stipple-status-box-container{width:100%!important;position:absolute!important;top:50px!important;text-align:center!important}.stipple-dottable-wrapper .stipple-status-box{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;border-radius:10px!important;-moz-border-radius:10px!important;-webkit-border-radius:10px!important;color:white!important;background-color:black!important;background-color:rgba(0,0,0,0.75)!important;padding:15px!important;font-size:18px!important;font-weight:bold!important;text-align:center!important;margin:0 auto!important}.stipple-new-dot-overlay,.stipple-mobile-overlay{z-index:150000!important;position:absolute!important;left:0!important;top:0!important;height:100%!important;width:100%!important;background-color:transparent;cursor:crosshair!important}.stipple-mobile-overlay{cursor:auto!important}.stipple-new-dot-overlay.stipple-inactive,.stipple-inactive.stipple-mobile-overlay{cursor:auto!important}.stipple-new-dot-container{-moz-border-radius:4px!important;-webkit-border-radius:4px!important;border-radius:4px!important;background:white!important;width:270px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;line-height:1!important;z-index:300000!important;color:#1e1e1e!important;-moz-box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;-webkit-box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;box-shadow:0 1px 7px rgba(0,0,0,0.4)!important}.stipple-new-dot-container input{float:none!important}.stipple-new-dot-container .stipple-dot-specific-fields{margin-left:15px!important;margin-right:15px!important;margin-bottom:15px!important}.stipple-new-dot-container .stipple-link-providers{border-top:1px solid #bebebe!important;text-align:center!important;margin-top:10px!important;margin-bottom:10px!important;padding-top:10px!important;padding-left:13px!important;padding-right:13px!important;font-size:11px!important;line-height:14px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;color:#666!important;font-style:italic!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons{margin-top:10px!important;margin-left:auto!important;margin-right:auto!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-icon{display:inline-block!important;width:16px!important;height:16px!important;margin-right:5px!important;background-image:url(//stipple.cachefly.net/production/external/link_providers/icon/sprite.png)!important;background-repeat:no-repeat!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-eventbrite{background-position:0 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-facebook{background-position:-16px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-flickr{background-position:-32px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-foursquare{background-position:-48px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-google-maps{background-position:-64px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-soundcloud{background-position:-80px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-twitter{background-position:-96px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-vimeo{background-position:-112px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-wikipedia{background-position:-128px 0!important}.stipple-new-dot-container .stipple-link-providers .stipple-link-providers-icons .stipple-provider-youtube{background-position:-144px 0!important}.stipple-new-dot-container .stipple-new-dot-buttons{text-align:right!important;margin-top:0!important;margin-bottom:5px!important;background-color:transparent!important;padding:10px 13px 5px!important;height:24px!important;border-top:1px solid #bebebe!important}.stipple-new-dot-container .stipple-new-dot-buttons input:active,.stipple-new-dot-container .stipple-new-dot-buttons img:active{position:relative!important;top:1px!important}.stipple-new-dot-container .stipple-new-dot-buttons .stipple-new-dot-save-button,.stipple-new-dot-container .stipple-new-dot-buttons .stipple-new-dot-edit-button{height:24px!important}.stipple-new-dot-container .stipple-new-dot-buttons .stipple-new-dot-cancel-button{height:24px!important;float:left!important}.stipple-new-dot-container form input[type="text"],.stipple-new-dot-container form input[type="url"],.stipple-new-dot-container form textarea,.stipple-new-dot-container form select{-moz-border-radius:4px!important;-webkit-border-radius:4px!important;border-radius:4px!important;margin:6px auto!important;display:block;width:230px!important;height:auto!important;padding:2px 5px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;color:black!important;border:1px solid #d3d3d3!important;text-transform:none!important}.stipple-new-dot-container form input[type="text"],.stipple-new-dot-container form input[type="url"],.stipple-new-dot-container form textarea{border:1px solid black!important;border:1px solid rgba(0,0,0,0.29297)!important;background-color:white!important;-moz-box-shadow:0 2px 0 #fff,0 1px 1px rgba(0,0,0,0.2) inset!important;-webkit-box-shadow:0 2px 0 #fff,0 1px 1px rgba(0,0,0,0.2) inset!important;box-shadow:0 2px 0 #fff,0 1px 1px rgba(0,0,0,0.2) inset!important}.stipple-new-dot-container form input[type="text"].stipple-empty-input,.stipple-new-dot-container form input[type="url"].stipple-empty-input,.stipple-new-dot-container form textarea.stipple-empty-input{color:#a7a7a7!important;font-style:italic!important}.stipple-new-dot-container form textarea{padding-top:5px!important;padding-bottom:5px!important;border:1px solid #999!important;box-shadow:0 1px 0 #e7e7e7 inset!important}.stipple-new-dot-container form select{font-size:11px!important;background-color:#f7f7f7!important;width:242px!important;-moz-box-shadow:0 2px 0 #FFF!important;-webkit-box-shadow:0 2px 0 #FFF!important;box-shadow:0 2px 0 #FFF!important;margin-bottom:10px!important;margin-top:6px!important}.stipple-new-dot-container form label{display:inline!important;color:#666!important;font-size:11px!important}.stipple-new-dot-container form label .stipple-validation-error{float:right!important;color:#fc4a4a!important}.stipple-new-dot-container form .stipple-new-dot-main-prompt{display:block!important;text-align:center!important;width:auto!important;float:none!important;padding:0!important}.stipple-new-dot-container form .stipple-fetching-link{height:140px!important;text-align:center!important}.stipple-new-dot-container form .stipple-fetching-link .stipple-ajax-spinner{text-align:center!important;position:relative!important;top:60px!important}.stipple-new-dot-container form .stipple-fetching-link img{height:20px!important;width:20px!important}.stipple-new-dot-container form .stipple-info-preview{padding:0 13px 5px!important}.stipple-new-dot-container form .stipple-info-preview .stipple-dot-box-title{background-image:none!important;height:auto!important;width:auto!important;text-indent:0!important;margin:auto!important;color:black!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;font-weight:bold!important;float:left!important;line-height:normal!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important;margin-top:0!important;word-wrap:break-word!important;max-width:250px!important}.stipple-new-dot-container form .stipple-info-preview .stipple-dot-box-title a{color:#262626!important;text-decoration:none!important;border-bottom:1px dotted #ccc!important}.stipple-new-dot-container form .stipple-info-preview .stipple-note{margin-top:10px!important;word-wrap:break-word!important}.stipple-new-dot-container form .stipple-link-previews{padding:0 13px 5px!important;margin-top:10px!important;margin-bottom:10px!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data{margin-top:10px!important;word-wrap:break-word!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data:first-child{margin-top:0!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-link-data-image{display:inline-block!important;margin-left:2px!important;margin-right:10px!important;text-align:center!important;float:left!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-link-data-image img{display:block!important;max-width:60px!important;max-height:60px!important;margin:auto!important;height:auto!important;width:auto!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-link-data-description-container{display:inline-block!important;font-size:12px!important;line-height:16px!important;color:#666!important;max-width:170px!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-link-data-description-container strong{font-weight:bold!important;color:#666!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-link-data-description-wide-container{display:inline-block!important;font-size:12px!important;line-height:16px!important;color:#666!important;max-width:250px!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-link-data-description-wide-container strong{font-weight:bold!important;color:#666!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-embed-container{margin:10px 0 0!important;padding:0!important;background-image:url(//stipple.cachefly.net/production/external/spinner-transparent.gif);background-repeat:no-repeat!important;background-position:center!important;text-align:center!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-embed-container:first-child{margin-top:0!important}.stipple-new-dot-container form .stipple-link-previews .stipple-link-data .stipple-embed-container .stipple-embedded-image{width:auto!important;height:auto!important;max-width:250px!important;max-height:none!important}.stipple-new-dot-container .stipple-new-product-dot-form .stipple-selected-product{padding:5px 5px 9px!important}.stipple-new-dot-container .stipple-new-product-dot-form .stipple-selected-product li{list-style-type:none!important}.stipple-new-dot-container .stipple-new-product-dot-form .stipple-selected-product .stipple-autocomplete-product-image{height:auto!important;width:auto!important;max-width:60px!important;max-height:60px!important;border:1px solid #989898!important;margin-left:10px!important}.stipple-new-dot-container .stipple-new-product-dot-form .stipple-selected-product .stipple-autocomplete-name{font-weight:bold!important}.stipple-new-dot-container .stipple-new-dot-chooser{width:100%!important;background-color:transparent!important;color:black!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important;font-size:11px!important;font-weight:bold!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-style:normal!important;height:45px!important;-moz-border-radius-topleft:4px!important;-moz-border-radius-topright:4px!important;-webkit-border-top-left-radius:4px!important;-webkit-border-top-right-radius:4px!important;border-top-left-radius:4px!important;border-top-right-radius:4px!important}.stipple-new-dot-container .stipple-new-dot-chooser .stipple-new-dot-choice{width:135px!important;height:30px!important;line-height:30px!important;margin:0!important;padding:0!important;background-color:#e6e6e6!important;display:inline-block!important;text-align:center!important;cursor:pointer!important;border-bottom:1px solid #bebebe!important}.stipple-new-dot-container .stipple-new-dot-chooser .stipple-new-dot-choice.stipple-selected{display:inline-block!important;background-color:transparent!important;border-bottom:none!important}.stipple-new-dot-container .stipple-new-dot-chooser .stipple-new-dot-choice:first-child{-moz-border-radius-topleft:4px!important;-webkit-border-top-left-radius:4px!important;border-top-left-radius:4px!important}.stipple-new-dot-container .stipple-new-dot-chooser .stipple-new-dot-choice:last-child{-moz-border-radius-topright:4px!important;-webkit-border-top-right-radius:4px!important;border-top-right-radius:4px!important;border-left:1px solid #bebebe!important;width:134px!important}a.stipple-button,input.stipple-button{-moz-border-radius:4px!important;-webkit-border-radius:4px!important;border-radius:4px!important;height:20px!important;line-height:20px!important;text-align:center!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-weight:bold!important;font-size:10px!important;font-style:normal!important;cursor:pointer!important;text-decoration:none!important;padding:0!important;border:1px solid #b3aaaa!important;color:#404040!important;background:-webkit-gradient(linear,left top,left bottom,from(#fff),to(#e6e6e6))!important;background:-moz-linear-gradient(top,#fff,#e6e6e6)!important;background:-webkit-linear-gradient(top,#fff,#e6e6e6)!important;height:20px!important;width:50px!important;display:inline-block;line-height:normal!important}a.stipple-button:active,input.stipple-button:active{position:relative!important;top:1px!important}.stipple-dot-box a.stipple-dot-box-button{-moz-border-radius:10px!important;-webkit-border-radius:10px!important;border-radius:10px!important;color:black!important;cursor:pointer!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;font-weight:normal!important;font-style:normal!important;height:20px!important;width:70px!important;text-decoration:none!important;display:inline-block!important;text-align:center!important}.stipple-dot-box a.stipple-dot-box-button .stipple-button-label{display:inline-block!important;vertical-align:top!important;line-height:20px!important}.stipple-dot-box a.stipple-dot-box-button:active .stipple-button-label{margin-top:1px!important}.stipple-dot-box{z-index:210000!important;position:absolute!important;line-height:normal!important;display:none;border:none!important;background-color:white!important;background-color:rgba(255,255,255,0.95)!important;*background-color:white!important;-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;border:none!important;-moz-box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;-webkit-box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important;color:#404040!important}.stipple-dot-box .stipple-dot-box-inner{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;font-weight:normal!important;font-style:normal!important;line-height:16px!important;text-align:left!important;padding:10px!important;border-radius:2px!important;-moz-border-radius:2px!important;-webkit-border-radius:2px!important;position:relative!important}.stipple-dot-box .stipple-dot-box-inner .stipple-dot-box-title{background-image:none!important;height:auto!important;width:auto!important;text-indent:0!important;margin:auto!important;color:black!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;font-weight:bold!important;float:left!important;line-height:normal!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important;margin-top:0!important;word-wrap:break-word!important;max-width:250px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-dot-box-title a{color:#262626!important;text-decoration:none!important;border-bottom:1px dotted #ccc!important}.stipple-dot-box .stipple-dot-box-inner .stipple-attribution{font-size:11px!important;color:#999!important}.stipple-dot-box .stipple-dot-box-inner span.stipple-attribution{float:left!important;margin-left:10px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-provider-logo-topright{border:none!important;position:absolute!important;top:10px!important;right:10px!important;left:auto!important;bottom:auto!important}.stipple-dot-box .stipple-dot-box-inner .stipple-provider-logo-topright img{height:16px!important;width:16px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-info-dot-box-note{margin-top:5px!important;word-wrap:break-word!important}.stipple-dot-box .stipple-dot-box-inner .stipple-external-link{display:inline-block!important;float:right!important;text-align:right!important;width:17px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-dot-box-bottom-ad-container{margin-top:10px!important;text-align:center!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data{margin-top:10px!important;word-wrap:break-word!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data:first-child{margin-top:0!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-image{display:inline-block!important;margin-left:2px!important;margin-right:10px!important;text-align:center!important;float:left!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-image img{display:block!important;max-width:60px!important;max-height:60px!important;margin:auto!important;height:auto!important;width:auto!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-container{display:inline-block!important;font-size:12px!important;line-height:16px!important;color:#666!important;max-width:170px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-container strong{font-weight:bold!important;color:#666!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-wide-container{display:inline-block!important;font-size:12px!important;line-height:16px!important;color:#666!important;max-width:250px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-wide-container strong{font-weight:bold!important;color:#666!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-embed-container{margin:10px 0 0!important;padding:0!important;background-image:url(//stipple.cachefly.net/production/external/spinner-transparent.gif);background-repeat:no-repeat!important;background-position:center!important;text-align:center!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-embed-container:first-child{margin-top:0!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-embed-container .stipple-embedded-image{width:auto!important;height:auto!important;max-width:250px!important;max-height:none!important}.stipple-dot-box .stipple-dot-box-inner .stipple-dot-box-edit-toggler{display:block!important;height:10px!important;width:10px!important;position:absolute!important;right:10px!important;bottom:10px!important;cursor:pointer!important}.stipple-dot-box .stipple-dot-box-inner .stipple-dot-box-edit-toggler.stipple-toggler-off{background-image:url(//stipple.cachefly.net/production/external/point-down.png)!important}.stipple-dot-box .stipple-dot-box-inner .stipple-dot-box-edit-toggler.stipple-toggler-on{background-image:url(//stipple.cachefly.net/production/external/point-up.png)!important}.stipple-dot-box .stipple-dot-box-edit-drawer{height:35px!important;border-top:1px solid #d8d8d8!important;background-color:#fcfcfc!important;-moz-border-radius-bottomleft:4px!important;-webkit-border-bottom-left-radius:4px!important;border-bottom-left-radius:4px!important;-moz-border-radius-bottomright:4px!important;-webkit-border-bottom-right-radius:4px!important;border-bottom-right-radius:4px!important;overflow:hidden}.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-edit-link-container,.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-delete-link-container{text-align:center!important;height:25px!important;padding-top:10px!important;line-height:10px!important}.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-edit-link-container{border-right:1px solid #d8d8d8!important;width:50%!important;float:left!important}.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-delete-link-container{overflow:hidden!important}.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-edit-link,.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-delete-link{border:none!important;text-decoration:underline!important;font-size:11px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important}.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-edit-link{color:#666!important}.stipple-dot-box .stipple-dot-box-edit-drawer .stipple-dot-delete-link{color:#bf0000!important}.stipple-dot-box-info .stipple-dot-box-inner{width:250px!important}.stipple-dot-box-info .stipple-note{margin-top:5px!important}.stipple-dot-box-info-eventbrite .stipple-dot-box-inner span.stipple-attribution{float:none!important;margin-left:0!important;display:block!important;clear:both!important}.stipple-dot-box a,.stipple-link-previews .stipple-link-data a{color:#666!important;text-decoration:none!important;border-bottom:1px dotted #ccc!important}.stipple-dot-box a.stipple-linked-image,.stipple-link-previews .stipple-link-data a.stipple-linked-image{border-bottom:none!important}.stipple-dot-box-product .stipple-dot-box-title{display:block!important}.stipple-dot-box-product .stipple-product-brand{font-size:12px!important}.stipple-dot-box-product .stipple-price-and-links{display:block!important;vertical-align:top!important}.stipple-dot-box-product .stipple-price-and-links .stipple-price{font-size:12px!important;word-wrap:break-word!important}.stipple-dot-box-product .stipple-price-and-links .stipple-product-price-separator{font-size:9px!important}.stipple-dot-box-product .stipple-product-info{float:left!important;margin-left:10px!important;min-width:130px!important;max-width:230px!important}.stipple-dot-box-product .stipple-dot-box-inner{min-width:200px!important;min-height:60px!important;max-width:300px!important;padding:10px!important;-moz-border-radius-bottomleft:0!important;-webkit-border-bottom-left-radius:0!important;border-bottom-left-radius:0!important;-moz-border-radius-bottomright:0!important;-webkit-border-bottom-right-radius:0!important;border-bottom-right-radius:0!important}.stipple-dot-box-product .stipple-dot-box-inner img.stipple-product-dot-image{width:inherit!important;height:auto!important;display:block!important;max-width:60px!important;max-height:60px!important;margin-left:auto!important;margin-right:auto!important;-webkit-border-radius:2px!important;border-radius:2px!important}.stipple-dot-box-product .stipple-dot-box-inner .stipple-product-dot-image-container{max-width:60px!important;max-height:60px!important;float:left!important;word-wrap:break-word!important;margin:0!important;-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;position:relative}.stipple-dot-box-product .stipple-dot-box-inner .stipple-product-dot-image-container:after{-webkit-border-radius:2px!important;border-radius:2px!important;-moz-box-shadow:1px 1px 0 rgba(0,0,0,0.3) inset,-1px -1px 0 rgba(0,0,0,0.3) inset,0 1px 0 rgba(255,255,255,0.75)!important;-webkit-box-shadow:1px 1px 0 rgba(0,0,0,0.3) inset,-1px -1px 0 rgba(0,0,0,0.3) inset,0 1px 0 rgba(255,255,255,0.75)!important;box-shadow:1px 1px 0 rgba(0,0,0,0.3) inset,-1px -1px 0 rgba(0,0,0,0.3) inset,0 1px 0 rgba(255,255,255,0.75)!important;position:absolute!important;top:0!important;left:0!important;width:100%!important;height:100%!important;content:""!important}.stipple-dot-box-product .stipple-dot-box-inner .stipple-product-dot-image-container .stipple-dot-box-popup-link{width:60px!important;display:block!important;float:left!important;margin:0!important;overflow:hidden!important;-moz-box-shadow:0 1px 0 white!important;-webkit-box-shadow:0 1px 0 white!important;box-shadow:0 1px 0 white!important}.stipple-dot-box-product .stipple-dot-box-inner .stipple-product-dot-image-container .stipple-dot-box-popup-link>div{float:none!important}.stipple-dot-box-product .stipple-dot-box-inner .stipple-product-dot-button-container{margin-top:9px!important}.stipple-dot-box-product .stipple-local-offers-container{max-width:300px!important;font-size:12px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-prompt{color:#efefef!important;-moz-text-shadow:0 -1px 0 #000!important;-webkit-text-shadow:0 -1px 0 #000!important;text-shadow:0 -1px 0 #000!important;-moz-box-shadow:0 1px 0 #b2b2b2 inset,0 1px 6px rgba(0,0,0,0.2)!important;-webkit-box-shadow:0 1px 0 #b2b2b2 inset,0 1px 6px rgba(0,0,0,0.2)!important;box-shadow:0 1px 0 #b2b2b2 inset,0 1px 6px rgba(0,0,0,0.2)!important;-webkit-text-stroke:1px solid #202020!important;background-color:#262626!important;cursor:pointer!important;text-align:center!important;height:25px!important;-moz-border-radius-bottomleft:4px!important;-webkit-border-bottom-left-radius:4px!important;border-bottom-left-radius:4px!important;-moz-border-radius-bottomright:4px!important;-webkit-border-bottom-right-radius:4px!important;border-bottom-right-radius:4px!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-prompt .stipple-local-offers-prompt-inner{padding-top:4px!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-prompt img,.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-prompt .stipple-local-offers-text{vertical-align:middle!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list{background-color:white!important;padding:3px 6px 3px 6px!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list a,.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list a:hover{color:#09f!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-container{padding:3px 0!important;text-align:left!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-container .stipple-local-offer-content{vertical-align:middle!important;display:inline-block!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-container .stipple-local-offer-image ~ .stipple-local-offer-content{max-width:263px!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-container .stipple-local-offer-image{width:20px!important;vertical-align:middle!important;word-wrap:break-word!important;-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-provider,.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-price{font-weight:bold!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-address{font-size:10px!important}.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-address a,.stipple-dot-box-product .stipple-local-offers-container .stipple-local-offers-list .stipple-local-offer-address a:hover{color:#333!important}a.stipple-shop{-moz-border-radius:4px!important;-webkit-border-radius:4px!important;border-radius:4px!important;height:20px!important;line-height:20px!important;text-align:center!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-weight:bold!important;font-size:10px!important;font-style:normal!important;cursor:pointer!important;text-decoration:none!important;padding:0!important;border:1px solid #b3aaaa!important;color:#404040!important;background:-webkit-gradient(linear,left top,left bottom,from(#fff),to(#e6e6e6))!important;background:-moz-linear-gradient(top,#fff,#e6e6e6)!important;background:-webkit-linear-gradient(top,#fff,#e6e6e6)!important;display:inline-block!important;height:20px!important;width:48px!important}a.stipple-shop:active{position:relative!important;top:1px!important}a.stipple-shop:active{position:relative!important;top:1px!important}.stipple-new-dot-container form .stipple-product-fields .stipple-autocomplete-box{position:absolute!important;border-top:none!important}.stipple-new-dot-container form .stipple-product-fields .stipple-autocomplete-box .stipple-autocomplete-item{width:220px!important}.stipple-new-dot-container .stipple-autocomplete-box{border-top:1px solid #bebebe!important;padding:5px 0!important;z-index:125000!important;display:none;height:140px!important;overflow-x:hidden!important;overflow-y:auto!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-add-product-button{-moz-border-radius:4px!important;-webkit-border-radius:4px!important;border-radius:4px!important;height:20px!important;line-height:20px!important;text-align:center!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-weight:bold!important;font-size:10px!important;font-style:normal!important;cursor:pointer!important;text-decoration:none!important;padding:0!important;border:1px solid #b3aaaa!important;color:#404040!important;background:-webkit-gradient(linear,left top,left bottom,from(#fff),to(#e6e6e6))!important;background:-moz-linear-gradient(top,#fff,#e6e6e6)!important;background:-webkit-linear-gradient(top,#fff,#e6e6e6)!important;margin-bottom:5px!important;margin-top:10px!important;width:100px!important;margin-top:4px!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-add-product-button:active{position:relative!important;top:1px!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-add-product-prompt{color:#666!important;font-style:italic!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-ajax-loader,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-no-results{height:140px!important;text-align:center!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-ajax-loader .stipple-autocomplete-add-product-button,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-ajax-loader .stipple-autocomplete-add-product-prompt,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-ajax-loader .stipple-ajax-spinner,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-no-results .stipple-autocomplete-add-product-button,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-no-results .stipple-autocomplete-add-product-prompt,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-no-results .stipple-ajax-spinner{text-align:center!important;position:relative!important;top:60px!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-ajax-loader .stipple-autocomplete-add-product-button:active,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-no-results .stipple-autocomplete-add-product-button:active{top:61px!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-ajax-loader img,.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-no-results img{height:20px!important;width:20px!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-items{list-style:none!important;padding:0!important;margin:0!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-items .stipple-autocomplete-add-product-prompt{text-align:center!important;margin-top:10px!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-item{cursor:pointer!important;padding:5px 0 5px 10px!important;font-style:normal!important;font-weight:normal!important;background-color:transparent!important;color:#666!important;margin:0!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-add-product{text-align:center!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-selected{background-color:#f1f1f1!important}.stipple-new-dot-container .stipple-autocomplete-box .stipple-autocomplete-partial-match{text-decoration:underline!important;font-weight:bold!important}.stipple-new-dot-container .stipple-autocomplete-provider-photo,.stipple-new-dot-container .stipple-autocomplete-names{display:inline-block!important;vertical-align:top!important;-moz-box-shadow:none!important;-webkit-box-shadow:none!important;box-shadow:none!important;border:none!important}.stipple-new-dot-container .stipple-autocomplete-provider-photo .stipple-autocomplete-brand-name,.stipple-new-dot-container .stipple-autocomplete-names .stipple-autocomplete-brand-name{max-width:190px!important;margin-top:4px!important}.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-friend-avatar,.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-provider-photo,.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-product-image{width:32px!important;height:32px!important;padding:0!important}.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-product-image{-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;border:1px solid #989898!important;margin-left:6px!important}.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-names{margin-left:9px!important;max-width:190px!important}.stipple-photo-top,.stipple-photo-actions{z-index:175000!important;min-height:30px!important;position:absolute!important;background:-webkit-linear-gradient(rgba(76,76,76,0.6) 0,rgba(44,44,44,0.6) 50%,rgba(0,0,0,0.6) 50%,rgba(19,19,19,0.6) 100%)!important;background:-moz-linear-gradient(rgba(76,76,76,0.6) 0,rgba(44,44,44,0.6) 50%,rgba(0,0,0,0.6) 50%,rgba(19,19,19,0.6) 100%)!important;background:-ms-linear-gradient(rgba(76,76,76,0.6) 0,rgba(44,44,44,0.6) 50%,rgba(0,0,0,0.6) 50%,rgba(19,19,19,0.6) 100%)!important;background:linear-gradient(rgba(76,76,76,0.6) 0,rgba(44,44,44,0.6) 50%,rgba(0,0,0,0.6) 50%,rgba(19,19,19,0.6) 100%)!important;-webkit-box-shadow:rgba(0,0,0,0.25) 0 1px 0 inset!important;-moz-box-shadow:rgba(0,0,0,0.25) 0 1px 0 inset!important;box-shadow:rgba(0,0,0,0.25) 0 1px 0 inset!important}.stipple-photo-top{left:0!important;top:0!important;width:100%!important;border-bottom:1px solid rgba(0,0,0,0.5)!important;height:30px!important;line-height:normal!important}.stipple-photo-top .stipple-show-product-container{overflow:hidden!important;text-align:left!important;margin:0 5px 0 10px!important}.stipple-photo-top .stipple-show-product-container{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;line-height:30px!important;color:#f1f1f1;font-weight:normal!important;white-space:nowrap!important;text-overflow:ellipsis!important;-moz-text-shadow:rgba(0,0,0,0.75) 0 1px 0!important;-webkit-text-shadow:rgba(0,0,0,0.75) 0 1px 0!important;text-shadow:rgba(0,0,0,0.75) 0 1px 0!important}.stipple-photo-top .stipple-show-product-container>*{vertical-align:middle!important}.stipple-photo-top .stipple-show-product-container .stipple-product-name{background-image:none!important;height:auto!important;width:auto!important;text-indent:0!important;margin:auto!important;color:black!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:12px!important;font-weight:bold!important;float:left!important;line-height:normal!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important;margin-top:0!important;word-wrap:break-word!important;max-width:250px!important;color:#f1f1f1!important;-moz-text-shadow:rgba(0,0,0,0.75) 0 1px 0!important;-webkit-text-shadow:rgba(0,0,0,0.75) 0 1px 0!important;text-shadow:rgba(0,0,0,0.75) 0 1px 0!important;float:none!important;margin-left:3px!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;display:inline-block!important;height:16px!important;line-height:16px!important}.stipple-photo-top .stipple-show-product-container .stipple-product-name a{color:#262626!important;text-decoration:none!important;border-bottom:1px dotted #ccc!important}.stipple-photo-top .stipple-show-product-container .stipple-product-brand,.stipple-photo-top .stipple-show-product-container .stipple-price,.stipple-photo-top .stipple-show-product-container .stipple-product-name{margin-left:3px!important}.stipple-photo-top .stipple-show-product-container .stipple-bull-separator{font-size:8px!important;margin-left:3px!important}.stipple-photo-top a.stipple-shop,.stipple-photo-top input.stipple-button{-moz-border-radius:4px!important;-webkit-border-radius:4px!important;border-radius:4px!important;height:20px!important;line-height:20px!important;text-align:center!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-weight:bold!important;font-size:10px!important;font-style:normal!important;cursor:pointer!important;text-decoration:none!important;padding:0!important;color:white!important;border:1px solid black!important;-moz-text-shadow:black 0 1px 1px!important;-webkit-text-shadow:black 0 1px 1px!important;text-shadow:black 0 1px 1px!important;-moz-box-shadow:rgba(0,0,0,0.15) 0 1px 0,rgba(255,255,255,0.25) 0 1px 0 inset!important;-webkit-box-shadow:rgba(0,0,0,0.15) 0 1px 0,rgba(255,255,255,0.25) 0 1px 0 inset!important;box-shadow:rgba(0,0,0,0.15) 0 1px 0,rgba(255,255,255,0.25) 0 1px 0 inset!important;background:darkgray!important;background:-moz-linear-gradient(#4b4b4b,#242424)!important;background:-webkit-linear-gradient(#4b4b4b,#242424)!important;background:-ms-linear-gradient(#4b4b4b,#242424)!important;background:linear-gradient(#4b4b4b,#242424)!important;font-size:11px!important}.stipple-photo-top a.stipple-shop:active,.stipple-photo-top input.stipple-button:active{position:relative!important;top:1px!important}.stipple-photo-actions{display:inline-block;left:0!important;bottom:0!important;right:auto!important;top:auto!important;height:30px!important;border-top:1px solid black!important;border-right:1px solid black!important;border-top:1px solid rgba(0,0,0,0.5)!important;border-right:1px solid rgba(0,0,0,0.5)!important;-moz-border-top-right-radius:4px!important;-webkit-border-top-right-radius:4px!important;border-top-right-radius:4px!important;-moz-box-shadow:rgba(255,255,255,0.25) 0 1px 0 inset!important;-webkit-box-shadow:rgba(255,255,255,0.25) 0 1px 0 inset!important;box-shadow:rgba(255,255,255,0.25) 0 1px 0 inset!important}.stipple-photo-actions .stipple-photo-action{display:block!important;width:36px!important;height:30px!important;border:none!important;background-image:url(//stipple.cachefly.net/production/external/icon/sprite.png)!important;background-repeat:no-repeat!important;background-position:center!important;float:left!important}.stipple-photo-actions .stipple-photo-action-tag{background-position:-247px 0!important}.stipple-photo-actions .stipple-photo-action-tag.stipple-active{background-position:-211px 0!important}.stipple-photo-actions .stipple-photo-actions-divider{display:block!important;float:left!important;height:30px!important;width:1px!important;background-color:black!important;background-color:rgba(0,0,0,0.5)!important}.stipple-dottable-wrapper .stipple-mobile-call-to-action{height:45px!important;width:45px!important;display:block;margin:0!important;padding:0!important;position:absolute!important;top:0!important;left:0!important;right:auto!important;bottom:auto!important;background-image:url(//stipple.cachefly.net/production/dots/mobile/sprite.png)!important;background-repeat:no-repeat!important;background-position:-360px 0!important;cursor:pointer!important;z-index:155001!important}.stipple-dottable-wrapper .stipple-mobile-call-to-action.stipple-active{display:none}.stipple-dottable-wrapper .stipple-call-to-action{height:30px!important;width:30px!important;display:block;filter:alpha(opacity=0);opacity:0;margin:0!important;padding:0!important;position:absolute!important;top:10px!important;right:10px!important;left:auto!important;bottom:auto!important;background-image:url(//stipple.cachefly.net/production/external/icon/sprite.png)!important;background-repeat:no-repeat!important;background-position:-91px 0!important;cursor:pointer!important;z-index:155000!important}.stipple-dottable-wrapper .stipple-call-to-action.stipple-dot-type-close{background-image:url(//stipple.cachefly.net/production/dots/sprite.png)!important}.stipple-dottable-wrapper.stipple-mobile .stipple-call-to-action{top:0!important;right:0!important;height:45px!important;width:45px!important;background-image:url(//stipple.cachefly.net/production/dots/mobile/sprite.png)!important;background-position:-45px 0!important}.stipple-metadata-box{background-color:white!important;background-color:rgba(255,255,255,0.95)!important;*background-color:white!important;-moz-border-radius:2px!important;-webkit-border-radius:2px!important;border-radius:2px!important;border:none!important;-moz-box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;-webkit-box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;box-shadow:0 1px 7px rgba(0,0,0,0.4)!important;color:#666!important;position:absolute!important;margin:0!important;z-index:210000!important;font-size:11px!important;line-height:normal!important;-moz-border-radius:4px!important;-webkit-border-radius:4px!important;border-radius:4px!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important}.stipple-metadata-box input[type="text"],.stipple-metadata-box input[type="url"],.stipple-metadata-box input[type="number"],.stipple-metadata-box textarea{-moz-border-radius:4px!important;-webkit-border-radius:4px!important;border-radius:4px!important;border:1px solid #ccc!important;font-size:10px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;-moz-box-shadow:0 1px 0 #e7e7e7 inset!important;-webkit-box-shadow:0 1px 0 #e7e7e7 inset!important;box-shadow:0 1px 0 #e7e7e7 inset!important;padding:0 5px!important;color:darkgray!important;padding-top:3px!important}.stipple-metadata-box a{-moz-box-shadow:none!important;-webkit-box-shadow:none!important;box-shadow:none!important;display:inline!important;padding:0!important;font-size:11px!important;-moz-text-shadow:0 1px 0 white!important;-webkit-text-shadow:0 1px 0 white!important;text-shadow:0 1px 0 white!important;background:none!important;border:none!important;border-bottom:1px dotted #ccc!important;-moz-border-radius:0!important;-webkit-border-radius:0!important;border-radius:0!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;text-decoration:none!important;color:#666!important}.stipple-metadata-box .stipple-metadata-content{margin:2px 0 0!important;word-wrap:break-word!important}.stipple-metadata-box{padding:20px 15px 15px!important;width:245px!important;font-weight:normal!important}.stipple-metadata-box .stipple-metadata-box-first-child,.stipple-metadata-box .stipple-hidden{height:0!important;width:0!important;margin:0!important;padding:0!important}.stipple-metadata-box .stipple-metadata-box-first-child+.stipple-metadata-container,.stipple-metadata-box .stipple-hidden+.stipple-metadata-container{border-top-style:none!important;padding-top:0!important}.stipple-metadata-box .stipple-metadata-container{border-top:1px solid #d8d8d8!important;padding-top:15px!important;margin-bottom:15px!important}.stipple-metadata-box .stipple-metadata-container:last-child{margin-bottom:0!important}.stipple-metadata-box .stipple-metadata-copyright-holder-claim-flag{position:absolute!important;top:0!important;right:15px!important;width:18px!important;height:19px!important;background-image:url(//stipple.cachefly.net/production/external/icon/sprite.png)!important;background-position:0 0!important;background-repeat:no-repeat!important;background-attachment:scroll!important;background-color:transparent!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container{margin-left:auto!important;margin-right:auto!important;padding:0!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-avatar-container{float:left!important;height:50px!important;width:50px!important;margin-right:10px!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-avatar-container a{border:none!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-avatar-container .stipple-metadata-copyright-holder-avatar{width:50px!important;height:50px!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-info{overflow:hidden!important;margin:0!important;text-align:left!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-name{display:block!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:14px!important;color:#3c83b8!important;text-decoration:none!important;border:none!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-website a{display:block!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:10px!important;color:#666!important;text-decoration:underline!important;border:none!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-website .stipple-metadata-copyright-holder-website-icon{display:inline-block!important;margin:0 0 0 5px!important;padding:0!important;height:9px!important;width:9px!important;position:relative!important;top:2px!important;background-image:url(//stipple.cachefly.net/production/external/icon/sprite.png)!important;background-position:-18px 0!important;background-repeat:no-repeat!important;background-attachment:scroll!important;background-color:transparent!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-identities{margin-top:5px!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-identities .stipple-identity-provider-link{display:block!important;float:left!important;width:16px!important;height:16px!important;margin-right:5px!important;background-image:url(//stipple.cachefly.net/production/external/icon/sprite.png)!important;background-repeat:no-repeat!important;background-attachment:scroll!important;background-color:transparent!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-identities .stipple-identity-provider-link-facebook{background-position:-27px 0!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-identities .stipple-identity-provider-link-flickr{background-position:-43px 0!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-identities .stipple-identity-provider-link-google-plus{background-position:-59px 0!important}.stipple-metadata-box .stipple-metadata-copyright-holder-container .stipple-metadata-copyright-holder-identities .stipple-identity-provider-link-twitter{background-position:-75px 0!important}.stipple-metadata-box .stipple-metadata-caption{margin-left:auto!important;margin-right:auto!important;color:#666!important;font-weight:normal!important;text-align:left!important;word-wrap:break-word!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:11px!important;line-height:16px!important}.stipple-metadata-box .stipple-metadata-caption a{border-bottom:none!important}.stipple-metadata-box .stipple-metadata-caption a:hover{text-decoration:underline!important}.stipple-metadata-box .stipple-metadata-field-container{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;color:#666!important}.stipple-metadata-box .stipple-metadata-field-container:last-child{margin-bottom:5px!important}.stipple-metadata-box span.stipple-metadata-field-label{display:inline-block!important;float:left!important;text-align:right!important;width:75px!important;color:#80868a!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:11px!important;line-height:16px!important}.stipple-metadata-box span.stipple-metadata-field-value{float:left!important;word-wrap:break-word!important;text-align:left!important;margin-left:5px!important;color:#666!important;display:inline-block!important;max-width:165px!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:11px!important;line-height:16px!important}.stipple-metadata-box .stipple-metadata-source-page-value a,.stipple-metadata-box .stipple-metadata-tagger-name-value a{display:inline-block!important;max-width:165px!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;border:none!important;text-decoration:underline!important}.stipple-metadata-box .stipple-metadata-powered-by{text-align:right!important;color:#666!important;margin:auto!important}.stipple-metadata-box .stipple-metadata-powered-by a{color:#666!important;font-weight:bold!important;border:none!important;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif!important;font-size:11px!important;line-height:16px!important}.stipple-dottable-wrapper .stipple-hidden,.stipple-metadata-box .stipple-hidden,.stipple-new-dot-container .stipple-hidden{display:none}.stipple-ajax-spinner-background{z-index:425000!important;width:107px!important;height:107px!important;background-image:url(//stipple.cachefly.net/production/external/spinner-bg.png)!important;background-repeat:no-repeat!important;position:absolute!important}.stipple-ajax-spinner-background img{position:absolute!important;top:40px!important;left:44px!important}\n</style>\n');
h.external_css_ie=c('<\!--[if IE]>\n<style type="text/css">\na.stipple-shop,a.stipple-want,a.stipple-button,.stipple-edit-button{background-color:#f3f3f3!important;width:auto!important;overflow:visible!important}a.stipple-want.stipple-wanted{background-color:#565656!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-image,.stipple-new-dot-container-form form .stipple-link-previews .stipple-link-data .stipple-link-data-image{width:60px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-container,.stipple-new-dot-container-form form .stipple-link-previews .stipple-link-data .stipple-link-data-description-container{width:160px!important}.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-wide-container,.stipple-new-dot-container-form form .stipple-link-previews .stipple-link-data .stipple-link-data-description-wide-container{width:240px!important}.stipple-photo-top,.stipple-photo-actions{background-color:#303030!important}.stipple-photo-top{border-bottom:1px solid black!important}\n</style>\n<![endif]--\>\n');
h.external_css_ie7=c('<\!--[if IE 7]>\n<style type="text/css">\na.stipple-toolbar-button,.stipple-dot-box .stipple-dot-box-inner .stipple-info img,.stipple-dot-box .stipple-price-and-links,.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-image,.stipple-dot-box .stipple-dot-box-inner .stipple-link-data .stipple-link-data-description-container,.stipple-new-dot-container .stipple-new-dot-chooser .stipple-new-dot-choice,a.stipple-dot-box-button .stipple-button-label,.stipple-autocomplete-box .stipple-autocomplete-item-person .stipple-autocomplete-provider-photo,.stipple-autocomplete-box .stipple-autocomplete-item-person .stipple-autocomplete-friend-avatar,.stipple-autocomplete-box .stipple-autocomplete-item-person .stipple-autocomplete-names-and-link,.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-product-image,.stipple-new-dot-container .stipple-autocomplete-item-product .stipple-autocomplete-names,.stipple-dot-box-person .stipple-dot-box-person-avatar,.stipple-dot-box-person .stipple-dot-box-person-content,.stipple-dot-box-person .stipple-dot-box-person-byline .stipple-dot-box-person-screen-name,.stipple-dot-box-person .stipple-dot-box-person-byline .stipple-dot-box-person-url,.stipple-call-to-action{display:inline!important;zoom:1!important}.stipple-new-dot-container .stipple-new-dot-forms input{display:block;width:235px!important;margin-top:3px!important;margin-bottom:3px!important}.stipple-new-dot-container .stipple-new-dot-forms .stipple-new-dot-buttons .stipple-button{width:60px!important;display:inline}\n</style>\n<![endif]--\>\n');
h.info_dot_content=c('<div>\n  <h1 class="stipple-dot-box-title stipple-info-dot-box-title">\n    <% if (link && link.length) { %>\n      <a href="<%= link %>" target="_blank">\n        <%= title %>\n      </a>\n    <% } else { %>\n      <%= title %>\n    <% } %>\n  </h1>\n  \n  <% if (typeof link_data === \'object\' && link_data) { %>\n    <% if (link_data.attribution && link_data.attribution.length) { %>\n      <span class="stipple-attribution">\n        <%= link_data.attribution %>\n      </span>\n    <% } %>\n  <% } %>\n\n  <div style="clear: both;">  </div>\n</div>\n\n<% if (note && note.length) { %>\n  <div class="stipple-note stipple-info-dot-box-note">\n    <%= note %>\n  </div>\n<% } %>\n\n<% if (typeof link_data === \'object\' && link_data) { %>\n  <% \n    var name = link_data.name.toLowerCase();\n    link_data.staticHostname = staticHostname;\n  %>\n              \n  <%= JST[\'link_template_\' + name] ? JST[\'link_template_\' + name](link_data) : JST.link_template(link_data) %>\n<% } %>\n');
h.info_dot_media=c('<% if (typeof link_data === \'object\' && link_data) { %>\n  <%\n    var name = link_data.name.toLowerCase();\n    link_data.staticHostname = staticHostname;\n  %>\n  <%= JST[\'link_template_\' + name] ? JST[\'link_template_\' + name](link_data) : JST.link_template(link_data) %>\n<% } %>\n\n<div style="margin-top: 10px !important;">\n  <h1 class="stipple-dot-box-title stipple-info-dot-box-title">\n    <% if (link && link.length) { %>\n      <a href="<%= link %>" target="_blank">\n        <%= title %>\n      </a>\n    <% } else { %>\n      <%= title %>\n    <% } %>\n  </h1>\n\n  <div style="clear: both;"></div>\n  \n  <% if (typeof link_data === \'object\' && link_data) { %>\n    <% if (link_data.attribution && link_data.attribution.length) { %>\n      <div class="stipple-attribution">\n        <%= link_data.attribution %>\n      </div>\n    <% } %>\n  <% } %>\n\n</div>\n\n<% if (note && note.length) { %>\n  <div class="stipple-note stipple-info-dot-box-note">\n    <%= note %>\n  </div>\n<% } %>\n\n');
h.link_template=c('<div class="stipple-link-data">\n  <% if (image && image.length) { %>\n    <div class="stipple-link-data-image" style="height: 60px;">\n      <a href="<%= url %>" target="_blank">\n        <img src="<%= image %>" />\n      </a>\n    </div>\n  <% } %>\n    \n  <div class="stipple-link-data-description-container <%= (image && image.length) ? \'\' : "stipple-link-data-description-wide-container"%>">\n    <div class="stipple-link-data-description">\n      <%= content %>\n    </div>\n  </div>\n  \n  <div style="clear: both;"></div>\n</div>');
h.link_template_eventbrite=c('<div class="stipple-link-data">\n  <div class="stipple-link-data-image" style="height: 60px;">\n    <a href="<%= url %>" target="_blank">\n      <img src="<%= image %>" />\n    </a>\n  </div>\n  \n  <div class="stipple-link-data-description-container">\n    <div class="stipple-link-data-description">\n      <strong>Location:</strong> <%= content.address %>\n      <br />\n      <strong>Time:</strong> <%= content.datetime %>\n      <br />\n      <strong>Hosted By:</strong> <%= content.host %>\n    </div>\n  </div>\n  \n  <div style="clear: both;"></div>\n</div>');
h.link_template_facebook=c('<div class="stipple-link-data">\n  <% if (image && image.length) { %>\n    <div class="stipple-link-data-image" style="height: 60px;">\n      <a href="<%= url %>" target="_blank">\n        <img src="<%= image %>" />\n      </a>\n    </div>\n  <% } %>\n    \n  <div class="stipple-link-data-description-container <%= (image && image.length) ? \'\' : "stipple-link-data-description-wide-container"%>">\n    <div class="stipple-link-data-description">\n      <iframe src="//www.facebook.com/plugins/like.php?href=<%= encodeURIComponent(url) %>&amp;send=false&amp;layout=button_count&amp;width=180&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=arial&amp;height=60" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:180px; height:21px; position:relative; top:20px;" allowTransparency="true"></iframe>\n    </div>\n  </div>\n  \n  <div style="clear: both;"></div>\n</div>');
h.link_template_flickr=c('<div class="stipple-link-data">\n  <div class="stipple-embed-container">\n    <a href="<%= url %>" class="stipple-linked-image" target="_blank">\n      <img class="stipple-embedded-image" src="<%= image %>" alt="<%= url %>" />\n    </a>\n  </div>\n</div>');h.link_template_googlemaps=c('<div class="stipple-link-data">\n  <div class="stipple-embed-container" style="height: 205px;">\n    <iframe src="<%= url.replace("http:", "https:") %>&amp;t=m&amp;ie=UTF8&amp;output=embed&amp;iwloc=" width="250" height="205" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" webkitAllowFullScreen allowFullScreen></iframe>\n  </div>\n</div>');
h.link_template_image=c('<div class="stipple-link-data">\n  <div class="stipple-embed-container">\n    <a href="<%= url %>" class="stipple-linked-image" target="_blank">\n      <img class="stipple-embedded-image" src="<%= image %>" alt="<%= url %>" />\n    </a>\n  </div>\n</div>');h.link_template_imgur=c('<div class="stipple-link-data">\n  <div class="stipple-embed-container">\n    <a href="<%= url %>" class="stipple-linked-image" target="_blank">\n      <img class="stipple-embedded-image" src="<%= image %>" alt="<%= url %>" />\n    </a>\n  </div>\n</div>');
h.link_template_rcs=c("<div class=\"stipple-link-data\">\n  <div class=\"stipple-embed-container\" style=\"height: 148px;\">\n    <embed width='250' height='148' align='middle' type='application/x-shockwave-flash' pluginspage='http://www.adobe.com/go/getflashplayer' allowscriptaccess='always' allowfullscreen='true' wmode='transparent' name='polyshowEmbed' quality='high' flashvars='configId=4&configUrl=../content/conf/CorrierePolymediaShow_embedded_640.xml&autostart=false&configAdvLabel=embed&configNielsenLabel=embed&videoId=<%= id %>&videoUrl=http://static2.video.corriereobjects.it/widget/content/video/rss/video_<%= id %>.rss&logo=http://static2.video.corriereobjects.it/widget/img/logocorriere.png&advTemplateUrl=http://video.corriere.it/widget/content/adv/advtemplate_108.xml&newsPaper=corriere&clickUrl=http://video.corriere.it/' src='http://static2.video.corriereobjects.it/widget/swf/CorrierePolymediaShow.swf'/>\n  </div>\n</div>");
h.link_template_soundcloud=c('<div class="stipple-link-data">\n  <div class="stipple-embed-container" style="height: 81px;">\n    <object height="81" width="100%"> <param name="movie" value="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F<%= numeric_id %>"></param> <param name="allowscriptaccess" value="always"></param> <embed allowscriptaccess="always" height="81" src="https://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F<%= numeric_id %>" type="application/x-shockwave-flash" width="100%"></embed> </object> \n  </div>\n</div>');
h.link_template_stipplephoto=c('<div class="stipple-link-data">\n  <div class="stipple-embed-container">\n    <a href="<%= url %>" class="stipple-linked-image" target="_blank">\n      <img class="stipple-embedded-image" src="<%= image %>" alt="<%= url %>" />\n    </a>\n  </div>\n</div>');h.link_template_twitter=c('<a class="stipple-provider-logo-topright" href="<%= url %>" target="_blank">\n  <img src="<%= staticHostname %>/api/social/twitter-icon-dotbox.png" alt="Twitter icon" />\n</a>\n<div class="stipple-link-data">\n  <div class="stipple-link-data-image" style="height: 60px;">\n    <a href="<%= url %>" target="_blank">\n      <img src="<%= image %>" />\n    </a>\n  </div>\n  \n  <div class="stipple-link-data-description-container">\n    <div>\n      <strong>\n        <%= date %>\n      </strong>\n    </div>\n    <div class="stipple-link-data-description">\n      <%= content %>\n    </div>\n  </div>\n  \n  <div style="clear: both;"></div>\n</div>');
h.link_template_vimeo=c('<div class="stipple-link-data">\n  <div class="stipple-embed-container" style="height: 187px;">\n    <iframe src="https://player.vimeo.com/video/<%= id %>?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff" width="250" height="187" frameborder="0" webkitAllowFullScreen allowFullScreen></iframe>\n  </div>\n</div>');h.link_template_youtube=c('<div class="stipple-link-data">\n  <div class="stipple-embed-container" style="height: 200px;">\n    <iframe width="250" height="200" src="https://www.youtube.com/embed/<%= id %>?rel=0&showsearch=0<%= start ? "&start=" + start : "" %>" frameborder="0" allowfullscreen></iframe>\n  </div>\n</div>');
h.local_offer=c('<div class="stipple-local-offer-container">\n  <% if (product_image) { %>\n    <img src="<%= product_image %>" class="stipple-local-offer-image" alt="Thumbnail for <%= product_name %>" title="<%= product_name %>"/>\n  <% } %>\n  <div class="stipple-local-offer-content">\n    <a href="<%= buy_link %>" target="_blank">\n    <span class="stipple-local-offer-provider">\n      <%= retailer_name %>\n    </span>\n      has <%= product_name %> for <span class="stipple-local-offer-price">$<%= price %></span>\n    </a>\n    <div class="stipple-local-offer-address">\n      <a href="<%= map_link %>" target="_blank">\n        <%= street %>, <%= city %> <%= state %>, <%= zip %>, <%= phone %>\n      </a>\n    </div>\n  </div>\n</div>\n');
h.metadata_box=c('<div class="stipple-metadata-box" style="display: none; opacity: 0;">\n  <div class="stipple-metadata-box-first-child"></div>\n  <% if (metadata && metadata.copyright_holder) { %>\n    <div class="stipple-metadata-copyright-holder-container stipple-metadata-container">\n      <div class="stipple-metadata-copyright-holder-avatar-container">\n        <a href="<%= metadata.copyright_holder.profile_url %>" <%= STIPPLE.stippleApp ? \'\' : \'target="_blank"\' %>>\n          <img class="stipple-metadata-copyright-holder-avatar" src="<%= metadata.copyright_holder.avatar_url %>">\n        </a>\n      </div>\n      <div class="stipple-metadata-copyright-holder-info">\n        <a href="<%= metadata.copyright_holder.profile_url %>" class="stipple-metadata-copyright-holder-name" <%= STIPPLE.stippleApp ? \'\' : \'target="_blank"\' %>>\n          <%= metadata.copyright_holder.name %>\n        </a>\n        <% if (metadata.copyright_holder.website) { %>\n          <div class="stipple-metadata-copyright-holder-website">\n            <a href="<%= metadata.copyright_holder.website %>" target="_blank"><%= metadata.copyright_holder.website.replace(new RegExp("^https?://"), \'\') %></a>\n          </div>\n        <% } %>\n\n        <div class="stipple-metadata-copyright-holder-identities">\n          <% if (metadata.copyright_holder_identities.facebook) { %>\n            <a href="<%= metadata.copyright_holder_identities.facebook %>" class="stipple-identity-provider-link stipple-identity-provider-link-facebook" target="_blank"></a>\n          <% } %>\n          \n          <% if (metadata.copyright_holder_identities.flickr) { %>\n            <a href="<%= metadata.copyright_holder_identities.flickr %>" class="stipple-identity-provider-link stipple-identity-provider-link-flickr" target="_blank"></a>\n          <% } %>\n          \n          <% if (metadata.copyright_holder_identities.google_oauth2) { %>\n            <a href="<%= metadata.copyright_holder_identities.google_oauth2 %>" class="stipple-identity-provider-link stipple-identity-provider-link-google-plus" target="_blank"></a>\n          <% } %>\n          \n          <% if (metadata.copyright_holder_identities.twitter) { %>\n            <a href="<%= metadata.copyright_holder_identities.twitter %>" class="stipple-identity-provider-link stipple-identity-provider-link-twitter" target="_blank"></a>\n          <% } %>\n          \n        </div>\n      </div>\n      <div style="height: 0; margin: 0; padding: 0; clear: both;"></div>\n    </div>\n    <div class="stipple-metadata-copyright-holder-claim-flag"></div>\n  <% } %>\n    \n  <div class="stipple-metadata-caption <%= (photo.caption && photo.caption.length) ? "stipple-metadata-container" : "stipple-hidden" %> ">\n    <%= photo.linked_caption %>\n  </div>\n\n  <% if (metadata) { %>\n    <div class="stipple-metadata-container">\n      <% if (metadata.tagger) { %>\n        <div class="stipple-metadata-tagger stipple-metadata-field-container">\n          <div class="stipple-metadata-content">\n            <span class="stipple-metadata-tagger-label stipple-metadata-field-label">\n              Stippled By:\n            </span>\n            <span class="stipple-metadata-tagger-name-value stipple-metadata-field-value">\n              <a href="<%= metadata.tagger.profile_url %>" title="Stippled by <%= metadata.tagger.name %>" <%= STIPPLE.stippleApp ? \'\' : \'target="_blank"\' %>><%= metadata.tagger.name %></a>\n            </span>\n            <div style="clear: both;"></div>\n          </div>\n        </div>\n      <% } %>\n      \n      <% if (metadata.source_page) { %>\n        <div class="stipple-metadata-source-page stipple-metadata-field-container">\n          <div class="stipple-metadata-content">\n            <span class="stipple-metadata-source-page-label stipple-metadata-field-label">\n              Source:\n            </span>\n            <span class="stipple-metadata-source-page-value stipple-metadata-field-value">\n              <a href="<%= metadata.source_page %>" title="<%= metadata.source_page %>" target="_blank"><%= metadata.source_page.replace(new RegExp("(?:^https?://|/.*$)", \'g\'), \'\') %></a>\n            </span>\n            <div style="clear: both;"></div>\n          </div>\n        </div>\n      <% } %>\n      \n      <% if (metadata.camera) { %>\n        <div class="stipple-metadata-camera stipple-metadata-field-container">\n          <div class="stipple-metadata-content">\n            <span class="stipple-metadata-camera-label stipple-metadata-field-label">\n              Camera:\n            </span>\n            <span class="stipple-metadata-camera-value stipple-metadata-field-value">\n              <%= metadata.camera %>\n            </span>\n            <div style="clear: both;"></div>\n          </div>\n        </div>\n      <% } %>\n      \n      <% if (metadata.focal_length) { %>\n        <div class="stipple-metadata-focal-length stipple-metadata-field-container">\n          <div class="stipple-metadata-content">\n            <span class="stipple-metadata-focal-length-label stipple-metadata-field-label">\n              Focal Length:\n            </span>\n            <span class="stipple-metadata-focal-length-value stipple-metadata-field-value">\n              <%= metadata.focal_length %>\n            </span>\n            <div style="clear: both;"></div>\n          </div>\n        </div>\n      <% } %>\n      \n      <% if (metadata.shutter_speed) { %>\n        <div class="stipple-metadata-shutter-speed stipple-metadata-field-container">\n          <div class="stipple-metadata-content">\n            <span class="stipple-metadata-shutter-speed-label stipple-metadata-field-label">\n              Shutter Speed:\n            </span>\n            <span class="stipple-metadata-shutter-speed-value stipple-metadata-field-value">\n              <%= metadata.shutter_speed %>\n            </span>\n            <div style="clear: both;"></div>\n          </div>\n        </div>\n      <% } %>\n      \n      <% if (metadata.aperture) { %>\n        <div class="stipple-metadata-aperture stipple-metadata-field-container">\n          <div class="stipple-metadata-content">\n            <span class="stipple-metadata-aperture-label stipple-metadata-field-label">\n              Aperture:\n            </span>\n            <span class="stipple-metadata-aperture-value stipple-metadata-field-value">\n              <%= metadata.aperture %>\n            </span>\n            <div style="clear: both;"></div>\n          </div>\n        </div>\n      <% } %>\n      \n      <% if (metadata.iso) { %>\n        <div class="stipple-metadata-iso stipple-metadata-field-container">\n          <div class="stipple-metadata-content">\n            <span class="stipple-metadata-iso-label stipple-metadata-field-label">\n              ISO:\n            </span>\n            <span class="stipple-metadata-iso-value stipple-metadata-field-value">\n              <%= metadata.iso %>\n            </span>\n            <div style="clear: both;"></div>\n          </div>\n        </div>\n      <% } %>\n      \n      <% if (metadata.metadata_date) { %>\n        <div class="stipple-metadata-date stipple-metadata-field-container">\n          <div class="stipple-metadata-content">\n            <span class="stipple-metadata-date-label stipple-metadata-field-label">\n              Date Taken:\n            </span>\n            <span class="stipple-metadata-date-value stipple-metadata-field-value">\n              <%= metadata.metadata_date %>\n            </span>\n            <div style="clear: both;"></div>\n          </div>\n        </div>\n      <% } %>\n      \n    </div>\n  <% } %>\n\n  <% if (metadata.maps_link) { %>\n    <div class="stipple-metadata-map-container stipple-metadata-container">\n      <%= metadata.maps_link %>\n    </div>\n  <% } %>\n\n  <div class="stipple-metadata-powered-by">\n    <div class="stipple-metadata-content">\n      Powered by <a href="http://stipple.com" target="_blank">Stipple</a>\n    </div>\n  </div>\n</div>');
h.new_dot_container=c('<div class="stipple-new-dot-container" style="display: none; position: absolute;">\n  <div class="stipple-new-dot-chooser">\n    <div class="stipple-new-dot-choice stipple-new-dot-choose-info" data-stipple-new-dot-type="info">Link</div><div class="stipple-new-dot-choice stipple-new-dot-choose-product stipple-selected" data-stipple-new-dot-type="product">Product</div>\n  </div>\n  \n  <div class="stipple-new-dot-forms">\n  \n    <div class="stipple-new-info-dot-form-container" data-stipple-new-dot-type="info">\n      <form class="stipple-new-info-dot-form stipple-form" >\n        <input type="hidden" name="dot[dot_type]" value="info"/>\n        <input type="hidden" name="dot[entity_id]" value="<%= entity.id %>" />\n        <input type="hidden" name="dot[entity_type]" value="<%= entity.type %>" />\n        <input type="hidden" name="dot[url]" value="<%= encodeURIComponent(location_href) %>" />\n        <input type="hidden" name="dot[start_x]" value="0" />\n        <input type="hidden" name="dot[start_y]" value="0" />\n        <input type="hidden" name="image_height" value="<%= imageHeight %>" />\n        <input type="hidden" name="image_width" value="<%= imageWidth %>" />\n        <input type="hidden" name="url" value="<%= encodeURIComponent(photoUrl) %>" />\n\n        <div class="stipple-info-fields stipple-dot-specific-fields stipple-default-show">\n          <input type="text" name="dot[link]" class="stipple-empty-input" value="URL (optional)" data-stipple-empty-val="URL (optional)" autocomplete="off" />\n          <input type="text" name="dot[title]" class="stipple-empty-input" value="Title" data-stipple-empty-val="Title" autocomplete="off" />\n          <textarea name="dot[note]" class="stipple-empty-input" data-stipple-empty-val="Description">Description</textarea>\n        </div>\n\n        <div class="stipple-link-providers stipple-default-show stipple-dot-start-fields">\n          <div class="stipple-link-providers-intro">\n            Use a URL from any of these services to create a media tag:\n          </div>\n          <div class="stipple-link-providers-icons">\n            <a href="http://www.eventbrite.com" target="_blank" title="Eventbrite" class="stipple-provider-icon stipple-provider-eventbrite"></a><a href="http://www.facebook.com" target="_blank" title="Facebook" class="stipple-provider-icon stipple-provider-facebook"></a><a href="http://www.flickr.com" target="_blank" title="Flickr" class="stipple-provider-icon stipple-provider-flickr"></a><a href="http://www.foursquare.com" target="_blank" title="Foursquare" class="stipple-provider-icon stipple-provider-foursquare"></a><a href="http://www.soundcloud.com" target="_blank" title="Soundcloud" class="stipple-provider-icon stipple-provider-soundcloud"></a><a href="http://twitter.com" target="_blank" title="Twitter" class="stipple-provider-icon stipple-provider-twitter"></a><a href="http://www.vimeo.com" target="_blank" title="Vimeo" class="stipple-provider-icon stipple-provider-vimeo"></a><a href="http://www.wikipedia.org" target="_blank" title="Wikipedia" class="stipple-provider-icon stipple-provider-wikipedia"></a><a href="http://www.youtube.com" target="_blank" title="Youtube" class="stipple-provider-icon stipple-provider-youtube"></a><a href="http://maps.google.com" target="_blank" title="Google Maps" class="stipple-provider-icon stipple-provider-google-maps"></a>\n          </div>\n        </div>\n        \n        <div class="stipple-info-preview stipple-default-hide stipple-default-empty" style="display: none;">\n          \n        </div>\n\n        <div class="stipple-link-previews stipple-default-hide stipple-default-empty" style="display: none;">\n          \n        </div>\n        \n        <div class="stipple-fetching-link stipple-default-hide" style="display: none;">\n          <img class="stipple-ajax-spinner" src="<%= image_host %>/external/spinner-white.gif" alt="ajax spinner" />\n        </div>\n\n        <div class="stipple-new-dot-buttons">\n          <%= JST.button({elementType: \'input\', inputType: \'button\', cssClass: "stipple-new-dot-cancel-button", newWindow: false, text: "Cancel"}) %>\n          <%= JST.button({elementType: \'input\', inputType: \'submit\', cssClass: "stipple-new-dot-save-button", newWindow: false, text: "Save"}) %>\n        </div>\n        \n      </form>\n    </div>\n    \n    <div class="stipple-new-product-dot-form-container" style="display: none;" data-stipple-new-dot-type="product">\n      <form class="stipple-new-product-dot-form stipple-form">\n        <input type="hidden" name="dot[dot_type]" value="product"/>\n        <input type="hidden" name="dot[entity_id]" value="<%= entity.id %>" />\n        <input type="hidden" name="dot[entity_type]" value="<%= entity.type %>" />\n        <input type="hidden" name="dot[product_id]" value="" />\n        <input type="hidden" name="dot[url]" value="<%= encodeURIComponent(location_href) %>" />\n        <input type="hidden" name="dot[start_x]" value="0" />\n        <input type="hidden" name="dot[start_y]" value="0" />\n        <input type="hidden" name="image_height" value="<%= imageHeight %>" />\n        <input type="hidden" name="image_width" value="<%= imageWidth %>" />\n        <input type="hidden" name="url" value="<%= encodeURIComponent(photoUrl) %>" />\n\n        <div class="stipple-selected-product stipple-product-fields" style="display: none;">\n          <ul>\n          </ul>\n        </div>\n        \n        <div class="stipple-product-dot-autocomplete-input-container stipple-product-fields stipple-dot-specific-fields">\n          <div class="stipple-item">\n            <div>\n              <label for="stipple-new-product-dot-autocomplete" class="stipple-new-dot-main-prompt">Type the name of a product or brand.</label>\n              <input type="text" id="stipple-new-product-dot-autocomplete" class="stipple-product-autocomplete stipple-empty-input" data-stipple-empty-val="Example: Prada shirt" value="Example: Prada shirt" autocomplete="off"/>\n              <%= JST.autocomplete_box({staticHostname: image_host, JST: JST}) %>\n            </div>\n          </div>\n        </div>\n\n        <div style="display: none;" class="stipple-product-fields stipple-product-specific-fields stipple-dot-specific-fields">\n          <div class="stipple-item">\n            <div>\n              <input type="hidden" name="product[entity_id]" value="<%= entity.id %>" />\n              <input type="hidden" name="product[entity_type]" value="<%= entity.type %>" />\n              <label for="stipple-new-product-name">Product Name:</label>\n              <input id="stipple-new-product-name" type="text" name="product[name]" class="stipple-empty-input stipple-validation-required" data-stipple-empty-val="e.g. Blue Polo Shirt" value="e.g. Blue Polo Shirt" autocomplete="off" data-stipple-validate-required="required" />\n              <label for="stipple-new-product-brand">Brand Name:</label>\n              <input id="stipple-new-product-brand" type="text" name="product[brand]" class="stipple-empty-input" data-stipple-empty-val="My Brand" value="My Brand" autocomplete="off" data-stipple-validate-required="required" />\n              <label for="stipple-new-product-price">Price:</label>\n              <input id="stipple-new-product-price" type="text" name="product[price]" class="stipple-empty-input" data-stipple-empty-val="29.99 (optional)" value="29.99 (optional)" autocomplete="off" />\n              <label for="stipple-new-product-currency">Currency:</label>\n              <select id="stipple-new-product-currency" name="product[currency]">\n                <option value="USD" data-stipple-currency-symbol="$" selected="selected">US Dollar ($)</option>\n                <option value="EUR" data-stipple-currency-symbol="\u20ac">Euro (\u20ac)</option>\n                <option value="AUD" data-stipple-currency-symbol="$" >Australian Dollar ($)</option>\n                <option value="CAD" data-stipple-currency-symbol="$">Canadian Dollar ($)</option>\n                <option value="CNY" data-stipple-currency-symbol="\u00a5">Chinese Yuan (\u00a5)</option>\n                <option value="JPY" data-stipple-currency-symbol="\u00a5">Japanese Yen (\u00a5)</option>\n                <option value="GBP" data-stipple-currency-symbol="\u00a3">Pound Sterling (\u00a3)</option>\n              </select>\n              <label for="stipple-new-product-url">Shop URL:</label>\n              <input id="stipple-new-product-url" type="url" name="product[url]" class="stipple-empty-input" data-stipple-empty-val="http://example.com" value="http://example.com" autocomplete="off" />\n              <label for="stipple-new-product-image-url">Thumbnail Image URL:</label>\n              <input id="stipple-new-product-image-url" type="url" name="product[image_url]" class="stipple-empty-input" data-stipple-empty-val="http://example.com/image.jpg" value="http://example.com/image.jpg" autocomplete="off" data-stipple-validate-required="required" />\n            </div>\n          </div>\n        </div>\n\n        <%= JST.autocomplete_box({staticHostname: image_host, JST: JST}) %>\n        \n        <div class="stipple-new-dot-buttons">\n          <%= JST.button({elementType: \'input\', inputType: \'button\', cssClass: "stipple-new-dot-cancel-button stipple-default-show", newWindow: false, text: "Cancel"}) %>\n          <%= JST.button({elementType: \'input\', inputType: \'button\', cssClass: "stipple-new-dot-edit-button stipple-default-hide stipple-hidden", newWindow: false, text: "Edit", style: "display: none;"}) %>\n          <%= JST.button({elementType: \'input\', inputType: \'submit\', cssClass: "stipple-new-dot-save-button stipple-default-hide stipple-hidden", newWindow: false, text: "Save", style: "display: none;"}) %>\n        </div>\n        \n      </form>\n    </div>\n  </div>\n  \n</div>\n');
h.person_provider_help=c("<p>\nTo quickly create a person dot, type the sigil corresponding to the service ('@' for Twitter, etc.),\n  followed by the user's name.\n</p>\n\n<p>\n  autocomplete and stuff\n</p>\n\n<p>i am really bad at writing help text.</p>\n");h.photo_actions=c('<% if (showPhotoActions || userCanEdit) { %>\n  <div class="stipple-photo-actions" style="display: none; opacity: 0;">\n    <div class="stipple-photo-actions-contents">\n      <% if (userCanEdit) { %>\n        <a href="#" class="stipple-photo-action stipple-photo-action-tag" title="Tag this photo"></a>\n      <% } %>\n      <div style="height: 0; width: 0; padding: 0; margin: 0; border: none; clear: both;"></div>\n    </div>\n  </div>\n<% } %>');
h.photo_top=c('<div class="stipple-photo-top <%= product ? \'\' : \' stipple-hidden\' %>" style="<%= isMobile ? \'\' : \'display: none; opacity: 0;\' %>">\n  <div class="stipple-photo-top-contents">\n    <div class="stipple-photo-top-display">\n      <% if (product) { %>\n        <div class="stipple-show-product-container" data-stipple-product-id="<%= product.id %>">\n          <% if (buyUrl) { %>\n            <a href="<%= buyUrl %>" class="stipple-shop" target="_blank">Shop</a>\n          <% } %>\n          \n          <% if (product.brand) { %>\n            <span class="stipple-product-brand"><%= product.brand %></span>\n          <% } %>\n  \n          <% if (product.price) { %>\n            <% if (product.brand) { %>\n              <span class="stipple-bull-separator">&bull;</span>\n            <% } %>\n            <span class="stipple-price"><%= product.price %></span>\n          <% } %>\n\n          <% if (product.brand || product.price) { %>\n            <span class="stipple-bull-separator">&bull;</span>\n          <% } %>\n\n          <span class="stipple-product-name" title="<%= product.name %>"><%= product.name %></span>\n        </div>\n      <% } %>\n      <div style="height: 0; clear: both;"></div>\n    </div>\n  </div>\n</div>\n');
h.status_box=c('<div class="stipple-status-box-container" style="display: none;">\n  <span class="stipple-status-box">\n    <%= status %>\n  </span>\n</div>')})();var da=function(){var c,b,g=1,a;return{postMessage:function(a,d,c){if(d){c=c||parent;if(window.postMessage)c.postMessage(a,d.replace(/([^:]+:\/\/[^\/]+).*/,"$1"));else if(d)c.location=d.replace(/#.*$/,"")+"#"+ +new Date+g++ +"&"+a}},receiveMessage:function(f,d){if(window.postMessage){f&&(a=function(a){if(typeof d==="string"&&a.origin!==
d||Object.prototype.toString.call(d)==="[object Function]"&&d(a.origin)===false)return false;f(a)});if(window.addEventListener)window[f?"addEventListener":"removeEventListener"]("message",a,false);else window[f?"attachEvent":"detachEvent"]("onmessage",a)}else{c&&clearInterval(c);c=null;f&&(c=setInterval(function(){var a=document.location.hash,d=/^#?\d+&/;if(a!==b&&d.test(a)){b=a;f({data:a.replace(d,"")})}},100))}}}}();A={truncateStringOnSpace:function(c,b){var g=c.substring(0,b),a;if(c.length<=b)return c;
if(c[b]!==" "){a=g.lastIndexOf(" ");g=g.substring(0,a)}return g},utf8Encode:function(c){var b="",g,a=c.length,f;for(g=0;g<a;g=g+1){f=c.charCodeAt(g);b=f>255?b+encodeURIComponent(c[g]):b+c[g]}return b},cssCamelCase:function(c){return c.replace(/-[a-z]/g,function(c){return c.slice(1).toUpperCase()})},openWin:function(c,b){var g;g=window.open(c,"_blank",b||"width=800,height=600,toolbar=no,status=no,directories=no,menubar=no,copyhistory=no");window.focus&&g.focus();return g},infoDotTemplateType:function(c){switch(c.toLowerCase()){case "flickr":case "youtube":case "vimeo":case "soundcloud":case "image":case "googlemaps":case "imgur":case "rcs":return"media";
default:return"content"}},isMobileBrowser:function(){return/android|(bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|ad|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent||navigator.vendor||window.opera)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||
navigator.vendor||window.opera).substr(0,4))},placeDotBox:function(e,b){var g=c(window),a,f,d=e.width(),o=g.width();a=b.offset().top-e.height()-8;f=b.offset().left-d/2+i;a<g.scrollTop()&&(a=a+(b.height()+e.height()+16));a+e.height()>g.scrollTop()+g.height()&&(a=g.scrollTop());f<g.scrollLeft()?f=f+(d/2+i):f+d>o+g.scrollLeft()&&(f=f-(d/2+i));f+d>o&&(f=d>o?0:(o-d)/2);e.css({opacity:0,top:a,left:f});e.stippleAppear()}};T=function(e){(e?e.find(".stipple-ajax-spinner-background"):c(".stipple-ajax-spinner-background")).filter(".stipple-centered").each(function(){var b=
c(this);b.css({top:b.parent().height()/2-b.height()/2,left:b.parent().width()/2-b.width()/2})}).end().show()};U=function(){c(".stipple-ajax-spinner-background").hide()};V=function(e){e||(e=c);return!(e.browser.msie&&parseFloat(e.browser.version)<7)&&!/playstation 3/i.test(navigator.userAgent)};W=function(){return c.browser.msie};I=function(){return c.browser.msie&&parseFloat(c.browser.version)===7};J=function(){return c.browser.webkit};M=function(e){var b={},e=(e||"").split(/\s+/);c(e).each(function(){if(this.indexOf("stippleit-sid-")!==
-1){var c=this.split("-");b[c[1]]=c[2]}});return b};N=function(c){var b;b=(b=c.css("background-image"))&&b!=="none"?b:void 0;c=c.attr("src")||b||c.children("[src]:first").attr("src");(b=/url\(['"]?([a-zA-Z0-9_$.+!*()-:\/?]+)['"]?\)/.exec(c))&&(c=b[1]);if(typeof c==="undefined")return"";if(!/^https?:/.test(c))if(c.charAt(0)==="/")c=n+location.host+c;else{b=location.pathname.lastIndexOf("/");b=b>-1?location.pathname.substring(0,b):location.pathname;b.charAt(b.length-1)!=="/"&&(b=b+"/");c=n+location.host+
b+c}return c};X=function(){return c("[class*=stippleit-sid-]").map(function(){return c(this)})};Y=function(e){var b,g,a,f,d,o,j,k;a=e.parent();j=e.is("img")||e.css("background-image")&&!e.is("a")?e:e.find("img:first");f=j.getRealDimension("width");d=j.getRealDimension("height");a.is("a")&&(e=a);b=e.css("position");if(b==="static"||b===void 0)b="relative";g=e.css("display");if(g==="inline"||g===void 0)g="inline-block";g==="inline-block"&&j.css("display")==="block"&&(g="block");g==="block"&&parseInt(e.css("margin-left"),
10)===0&&parseInt(e.position().left,10)>0&&(k=true);if(a.is(".stipple-dottable-wrapper")){a=e.parent();a.css({height:d,width:f});e.siblings(":not(.stipple-new-dot-overlay)").remove()}else{a=c(h.dot_wrapper({}));o=e.css("border");a=e.wrap(a).parent();a.css({height:d,width:f,display:g,position:b,border:o});e.css({position:"",display:"",border:""});if(v){a.addClass("stipple-mobile");a.prepend('<div class="stipple-mobile-overlay"></div>')}a.append(h.ajax_spinner({staticHostname:"//stipple.cachefly.net/production"}));
b=c('<div class="stipple-new-dot-overlay" style="display: none;" />');b.prependTo(a);W()&&b.css({"background-color":"black",opacity:0.01});b=["margin-top","margin-right","margin-left","margin-bottom"];if(e.is("img")||e.is("a"))b=b.concat([["float","none"],"padding-top","padding-right","padding-left","padding-bottom","border-top-right-radius","border-top-left-radius","border-bottom-right-radius","border-bottom-left-radius",["-moz-box-shadow","none"],["box-shadow","none"]]);if(e.is("a")){g=M(j.attr("class"));
if(g.sid){g="stippleit-sid-"+g.sid;j.removeClass(g);e.addClass(g)}}j.moveStyles(b,a);e.is("a")&&e.moveStyles(b,a);j.css("max-width").length&&j.css("max-width",a.width()?a.width()+"px":"100%");j.css("max-height").length&&j.css("max-height",a.height()?a.height()+"px":"100%");if(k){a.css("margin-left","auto");a.css("margin-right","auto")}J()&&j.width(f)}a.attr("data-stipple-dom-id",r);r=r+1;L&&L(a,e);return a};O=function(e,b){var g,a,f,d,o,j,k,ea,w,s,fa,p,K;if(e.css("visibility")!=="hidden"){K=e.data("stipple-tagLayer");
p=STIPPLE.stippleApp&&!x?0:1500;g=Y(e);g.data("photoData",b);g.data("photoData").product_dot_count=0;if(!b.squelch_photo_info_dot){f=c(h.call_to_action({visible:!b.product&&(b.dots_count&&b.dots_count>0||b.caption&&b.caption.length)}));v&&l&&f.css({display:"block",opacity:1});g.append(f)}v&&(!b.product&&b.dots_count)&&g.append('<div class="stipple-mobile-call-to-action'+(l?" stipple-active":"")+'"></div>');g.data("entity",STIPPLE.loaded_entity);d=N(e);f=b.user_can_edit;w=e.is("a")?e.find("img:first"):
e;o=w.getRealDimension("width");j=w.getRealDimension("height");d={JST:h,photoUrl:d,stipplePhotoUrl:b.image_url_original||d,imageWidth:o,imageHeight:j,entity:g.data("entity"),product_id:e.data("product_id")||null,image_host:"//stipple.cachefly.net/production",hostName:n+z,location_href:m,userCanEdit:f||false,photoCredit:b.credit||null,domId:g.data("stipple-dom-id"),user:b.user,userLoggedIn:b.user&&b.user.id||false,rightsManaged:b["rights_managed?"]||false,product:b.product||null,buyUrl:b.buy_url||
null,photoId:b.id||null,copyright_holder_id:b.copyright_holder_id||null,source_page:b.source_page||null};g.data("toolbarData",d);w=c(h.photo_top(c.extend({},d,{isMobile:v})));if(!v){fa=c(h.photo_actions(c.extend({},d,{showPhotoActions:B,plugin:C})));fa.appendTo(g)}(f||b.dots&&b.dots.length||b.product)&&w.appendTo(g);if(I()){w&&w.css("width",o);g.find("*").andSelf().each(function(){var a=c(this);a.css("display")==="inline-block"&&a.css({display:"inline",zoom:1})})}if(b&&!c.isEmptyObject(b)&&b.dots){c.each(b.dots,
function(){a=c(h.dot({creator_id:this.user_slug}));a.addClass("stipple-dot-type-"+this.icon_type);s=new Image;switch(this.dot_type){case "product":g.data("photoData").product_dot_count+=1;s.src=this.product_image;break;case "info":if(this.link_data&&this.link_data.data&&this.link_data.data.image)s.src=this.link_data.data.image}s=null;k=this.start_x*parseInt(o,10)/b.image_width;ea=this.start_y*parseInt(j,10)/b.image_height;K&&(!this.user_slug||K.toString().toLowerCase()!==this.user_slug.toString().toLowerCase()&&
K.toString()!==this.user_id.toString())?a.addClass("stipple-filtered").hide():v&&l?a.css({opacity:1,display:"block"}):a.css({opacity:0.6,display:"block"});a.data("dotData",this).css({position:"absolute",left:k-i,top:ea-i}).appendTo(g);(!v||v&&!l)&&a.animate({opacity:0},p)});f=parseInt(g.data("photoData").dots_count,10);(f>0||g.data("photoData").product_id)&&y("photo:load",{location:m,photo_id:g.data("photoData").id,prototype_photo_id:g.data("photoData").prototype_image_id,photo_copy_group_id:g.data("photoData").photo_copy_group_id,
photo_url:d.photoUrl,dots_count:f,product_id:g.data("photoData").product_id,product_dot_count:g.data("photoData").product_dot_count,account_id:g.data("photoData").entity_type+":"+g.data("photoData").entity_id,embed:!!window.stippleEmbedded,embed_origin:window.stippleEmbedOrigin})}}};Q=function(e,b,g,a){b.data("stipple-tagLayer",e.tag_layer);if(b.is("img")&&(!g||!a)&&!b[0].complete){b.load(function(){O(b,e)});J()||b.attr("src",b.attr("src"))}else O(b,e);if(g=b.data("stipple-callbackBatches")){c.each(g,
function(a){E[a].stillLoading=E[a].stillLoading-1;if(!E[a].stillLoading){E[a].callback(photos);delete E[a]}});b.removeData("stipple-callbackBatches")}};P=function(e,b){var g,a,f,d,o,j;c.each(e,function(e,h){g=N(h);if(!STIPPLE.loaded_entity)STIPPLE.loaded_entity={type:"Site",id:M(h.attr("class")).sid};h.data("entity",STIPPLE.loaded_entity);o=h.is("a")?h.find("img:first"):h;f=o.getRealDimension("width");d=o.getRealDimension("height");a={url:g,image_height:d,image_width:f};if(b)a.tag_layer=b;if(h.attr("data-stipple-photo-id"))a.photo_id=
h.attr("data-stipple-photo-id");a.source_page=location.href;j=c.ajax({url:n+z+"/dots/recall/"+STIPPLE.loaded_entity.type+"/"+STIPPLE.loaded_entity.id+"/",data:a,type:"get",dataType:u?"jsonp":"json",jsonpCallback:u?"stippleDotRecallCallback_"+(a.photo_id?"photo"+a.photo_id:g.replace(/[^\w]/g,"")):null,timeout:3E4});j.done(function(a){Q(a,h,f,d)});j.fail(function(a){var c=a.responseText;try{c=c.replace(/^.+?\(/,"").replace(/\)$/,"");c=JSON.parse(c);Q(c,h,f,d)}catch(b){typeof console==="object"&&console.log&&
console.log("Stipple recall error: ",b,a.responseText)}});j.done(function(){try{j.abort=j.onreadystatechange=null}catch(a){}j=null})})};G=function(c){return setTimeout(function(){c.removeData("removeTimer").stippleDisappear()},300)};Z=function(){var e,b;b="https://"+z;if(t)return t;e=I()?encodeURIComponent(n+location.host+location.pathname+location.search):encodeURIComponent(n+location.host);e=b+"/external_embeds/?cachebust="+Date.parse(new Date)+"&parent_href="+e;I()&&(b=e+"#");t=c('<iframe src="'+
e+'" style="display: none;"/>');H=c.Deferred();t.load(function(){H.resolve()});c("body").append(t);da.receiveMessage(function(b){var a,f,d,o;try{a=c.parseJSON(b.data)}catch(j){typeof console==="object"&&console.log&&console.log("Stipple received unparsable message: "+b.data);return true}f=c("div[data-stipple-dom-id="+a.dom_id+"]");if(I())location.hash="";switch(a.action){case "dot:create":f.stippleEnableForms();if(a.status==="success"){d=f.data("photoData");d.dots=d.dots||[];d.dots.push(a.data);f.find(".stipple-new-dot").removeClass("stipple-new-dot").addClass("stipple-dot"+
(a.data?" stipple-dot-type-"+a.data.icon_type:"")).css("z-index",parseInt(f.children(".stipple-new-dot-overlay").css("z-index"),10)+100).data("dotData",a.data).end().find(".stipple-new-dot-overlay").removeClass("stipple-inactive");f.data("new_dot_container")&&f.data("new_dot_container").stippleDisappear("fast",function(){c(this).stippleResetForms();f.find(".stipple-photo-action-tag.stipple-active").click()});STIPPLE.callbacks.onDotCreate.success.execute(a.data,f);y("dot:create",{photo_id:d.id,photo_url:f.data("toolbarData").photoUrl,
dot_id:a.data.id,dot_type:a.data.icon_type,link_service:a.data.link_data?a.data.link_data.name:"",product_id:a.data.product_id,account_id:f.data("photoData").entity_type+":"+f.data("photoData").entity_id})}else{try{o=a.data.join("\n")}catch(e){o=a.message}STIPPLE.callbacks.onDotCreate.error.execute(a.data);alert("There was an error creating your dot. The errors were:\n\n"+o);f.data("new_dot_container").stippleResetForms(true)}break;case "dot:update":f.stippleEnableForms();if(a.status==="success"){d=
f.data("photoData");d.dots=d.dots||[];c.each(d.dots,function(c){if(d.dots[c].id===a.data.id)d.dots[c]=a.data});f.find(".stipple-updatable-dot").each(function(){c(this).data("dotBox").remove();c(this).removeData("dotBox")}).removeClass("stipple-updatable-dot").attr("class","stipple-dot"+(a.data?" stipple-dot-type-"+a.data.icon_type:"")).data("dotData",a.data).end().find(".stipple-new-dot-overlay").removeClass("stipple-inactive").end().data("new_dot_container").removeData("stippleMode").stippleDisappear("fast",
function(){c(this).stippleResetForms()})}else{try{o=a.data.join("\n")}catch(h){o=a.message}alert("There was an error creating your dot. The errors were:\n\n"+o);f.data("new_dot_container").stippleResetForms(true)}break;case "dot:delete":if(a.status==="success"){f.stippleEnableForms().stippleGrowlStatus("Tag Deleted").find(".stipple-dot[data-delete-dot-id="+a.data.id+"]").addClass("stipple-fading").stippleDisappear(400,function(){c(this).remove()});d=f.data("photoData");d.dots=c.grep(d.dots,function(c){return c.id!==
a.data.id});f.data("photoData",d);STIPPLE.callbacks.onDotDelete.success.execute(a.data.id,f);y("dot:delete",{photo_id:d.id,photo_url:f.data("toolbarData").photoUrl,dot_id:a.data.id,dot_type:a.data.icon_type,account_id:f.data("photoData").entity_type+":"+f.data("photoData").entity_id})}else alert("There was an error deleting the dot. The message was: "+a.message)}},b);return t};y=function(c,b){D(JSON.stringify({act:"metric:mixpanel",event:c,mp_properties:b}))};D=function(e){var b;if(t){b=t.attr("src");
typeof e!=="string"&&(e=c.param(e));H.done(function(){da.postMessage(e,b,t[0].contentWindow)})}};$=function(){c.fn.getRealDimension=function(e){var b=c(this),g=b.css(e);parseInt(g,10)||(g=parseInt(b.attr(e),10)||b[e]()||parseInt(b.get(0).style[e],10));return g}};aa=function(){var e=c(document);c.fn.stippleFadeToDistance=function(a,f){var d=c(this);c.each(d,function(){var d=c(this),b,e;e=d.position();b=parseInt(e.left,10)+i;e=parseInt(e.top,10)+i;b=b-a;e=e-f;b=Math.sqrt(b*b+e*e);b=Math.round(b);e=
0.6;b<200&&(e=Math.max(0.6,1-b/200));d.css({opacity:e})});return d};c.fn.stippleUserCanEdit=function(){var a=c(this).stippleWrapper().data("photoData");return a&&a.user_can_edit};c.fn.stippleWrapper=function(){return c(this).closest(".stipple-dottable-wrapper")};c.fn.stippleDisappear=function(a,f){var d=c(this);c.isFunction(a)?f?a=a():f=a:a||(a="fast");d.stop().fadeTo(a,0,function(){d.hide(0,f)});return d};c.fn.stippleAppear=function(a,f){var d=c(this);c.isFunction(a)?f?a=a():f=a:a||(a="fast");d.stop().fadeTo(a,
1,function(){d.show(0,f)});return d};c.fn.cleanupNewDots=function(){var a=c(this).stippleWrapper();a.children(".stipple-inactive").removeClass("stipple-inactive").end().children(".stipple-dot:hidden").show().end().children(".stipple-deleteable-dot").css("cursor","auto").removeClass("stipple-deleteable-dot").end().children(".stipple-updatable-dot").css("cursor","auto").removeClass("stipple-updatable-dot").end().children(".stipple-new-dot").stippleDisappear("fast",function(){c(this).remove()});a.data("new_dot_container")&&
a.data("new_dot_container").stippleDisappear("fast",function(){a.data("new_dot_container").stippleResetForms()})};c.fn.stippleEnableEditMode=function(){c(this).stippleWrapper().stippleEnableNewDotMode().children(".stipple-new-dot-overlay").show()};c.fn.stippleCancelEditMode=function(){var a=c(this).stippleWrapper();a.stippleDisableNewDotMode();a.cleanupNewDots();return a};c.fn.stippleGrowlStatus=function(a){var f=c(this);c(h.status_box({status:a})).appendTo(f).fadeIn(100,function(){c(this).fadeOut(2E3,
function(){c(this).remove()})});return f};c.fn.stippleUpdateFormCoordinates=function(a,f){var d=c(this);d.find('input[name="dot[start_x]"]').val(a);d.find('input[name="dot[start_y]"]').val(f);return d};c.fn.stippleResetForms=function(a){var f=c(this);if(a)a=".stipple-empty-input";else{f.removeData("dotData");a='input[type="text"], input[type="url"], textarea';f.find("select option").removeProp("selected").filter(":first").prop("selected",true)}f.find(a).each(function(){var a=c(this);a.val(a.attr("data-stipple-empty-val"));
a.addClass("stipple-empty-input")}).end().find(".stipple-autocomplete-box ul").empty().end().find("form").trigger("stipple:mode:default");return c(this)};c.fn.stippleValidateForm=function(){var a,f,d,b,e,g;f=c(this).find('[data-stipple-validate-required="required"]');c.each(f,function(f,h){g=c(h);if(g.val()===""||g.val()===g.data("stipple-empty-val")){typeof a==="undefined"&&(a={});b=g.attr("name");e=(d=/^(\w+)\[(\w+)\]\[(\w+)\]$/.exec(b))?d[1]+" "+d[2]+" "+d[3]:(d=/^(\w+)\[(\w+)\]$/.exec(b))?d[1]+
" "+d[2]:b;e=e.replace(/_/g," ");a[g.attr("name")]={el:g,message:"is required",stringName:e}}});return typeof a==="object"?[false,a]:[true,{}]};c.fn.stipplePlaceContainer=function(a){var f=c(this),d,b,e,g,h=parseInt(f.css("padding-top"),10),w=parseInt(f.css("padding-bottom"),10),s,i;d=a.pageY;a=a.pageX;b=c(window);g=f.height()+h+w;s=b.height();i=b.scrollTop();if(d!==d){e=f.offset().top;e+g>s&&(d=s-g-10)}d<i?d=i:d+g>s+i&&(d=s+i-(g+10));if(d<i||d+g>i+s)d=i>=0?i:0;g>s&&f.css({height:s-(h+w),"overflow-y":"auto"});
a+f.width()>b.width()+b.scrollLeft()&&(a=a-(f.width()+60));f.css({top:d,left:a});f.stippleAppear("fast")};c.fn.stipplePlaceNewDotContainer=function(a){var f=c(this);f.stipplePlaceContainer({pageX:a.pageX+30,pageY:a.pageY-f.height()/5})};c.fn.stipplePlaceHelpPopup=function(a){var f=c(this);f.stipplePlaceContainer({pageX:a.pageX-f.width()/2,pageY:a.pageY-(f.height()+30)})};c.fn.stippleLoadDotIntoContainer=function(a,f){var d=c(this),b,e,g,h={};d.stippleResetForms();b=a.data("dotData");d.data("dotData",
b);switch(b.dot_type){case "product":d.find(".stipple-new-dot-chooser").children(":first").click();e=d.find("form:first");g={name:b.title,brand:b.brand,image_url:b.product_image,price:b.product_price||b.product_rental_price};e.trigger("stipple:mode:show_product",g);d.stipplePlaceNewDotContainer(f);return;case "info":g=0;e=d.find(".stipple-new-info-dot-form");e.trigger("stipple:mode:preview_unlinked_dot");h={"dot[title]":b.title,"dot[link]":b.link,"dot[note]":b.note}}d.find(".stipple-new-dot-chooser").children(":eq("+
g+")").click();h["dot[entity_id]"]=d.data("wrapper").data("entity").id;h["dot[entity_type]"]=d.data("wrapper").data("entity").type;h["dot[start_x]"]=parseInt(a.css("top"),10)+i;h["dot[start_y]"]=parseInt(a.css("left"),10)+i;h["dot[url]"]=b.url;h.url=b.photo_url;h.image_height=d.data("wrapper").height();h.image_width=d.data("wrapper").width();e=d.find("form:eq("+g+")");c.each(h,function(a,c){c&&c.toString().length&&e.find('[name="'+a+'"]').removeClass("stipple-empty-input").val(c)});d.data("stippleMode",
"edit");d.stipplePlaceNewDotContainer(f)};c.fn.stippleCreateNewDotContainer=function(){var a=c(this).stippleWrapper(),f={wrapperId:a.data("stipple-dom-id")},f=c(h.new_dot_container(c.extend(f,a.data("toolbarData"))));a.data("new_dot_container",f);f.data("wrapper",a);f.appendTo("body");return f};c.fn.stippleSetDotFormType=function(a){var f=c(this);f.addClass("stipple-selected").siblings().removeClass("stipple-selected").end().closest(".stipple-new-dot-container").find(".stipple-new-dot-forms").children("div[data-stipple-new-dot-type!="+
a+"]").hide().siblings("div[data-stipple-new-dot-type="+a+"]").show();return f};c.fn.stippleNewAutoCompleteSuggestions=function(a,f,d){var b=c(this),e,g=b.children(".stipple-autocomplete-items");g.empty();c.each(a,function(){if(d.acTemplate){e=c(h[d.acTemplate]({data:this,staticHostname:"//stipple.cachefly.net/production"}));e.data("autocomplete",this);g.append(e)}else this.toLowerCase&&g.append(h.autocomplete_item({text:this,boldLength:f}))});d.acType&&d.acType==="product"&&g.append(h.autocomplete_add_product({JST:h}));
b.removeData("selectedIndex").find(".stipple-selected").removeClass("stipple-selected");return b};c.fn.stippleArrowPressed=function(a,f){var d=c(this),b=d.data("acBox"),e,g;if(!b)return d;e=b.data("selectedIndex");g=b.find("li");if(typeof e==="undefined")e=a;else{g.eq(e).removeClass("stipple-selected");e=f(e,g.length-1)}b.data("selectedIndex",e);g.eq(e).addClass("stipple-selected");return d};c.fn.stippleUpArrowPressed=function(){var a=c(this),f=a.data("acBox");if(!f)return a;f=f.find("li.stipple-autocomplete-item");
return a.stippleArrowPressed(f.length-1,function(a,c){a=a-1;a<0&&(a=c);return a})};c.fn.stippleDownArrowPressed=function(){var a=c(this),f=a.data("acBox");if(!f)return a;f.find("li.stipple-autocomplete-item");return a.stippleArrowPressed(0,function(a,c){a=a+1;a>c&&(a=0);return a})};c.fn.stippleDisableForms=function(){var a=c(this),f=a.stippleWrapper();f.data("disableForms",true).find('input[type="submit"]').prop("disabled",true);T(f);return a};c.fn.stippleEnableForms=function(){var a=c(this);a.stippleWrapper().removeData("disableForms").find('input[type="submit"]').removeProp("disabled");
U();return a};c.fn.stippleEnableNewDotMode=function(){var a=c(this);a.stippleWrapper().data("wrapperMode","edit").children(".stipple-new-dot-overlay").show();return a};c.fn.stippleDisableNewDotMode=function(){var a=c(this);a.stippleWrapper().removeData("wrapperMode").children(".stipple-new-dot-overlay").hide();return a};c.fn.moveStyles=function(a,f){var d=c(this),b,e,g;c.each(a,function(a,h){if(c.isArray(h)){b=h[0];g=h[1]}else{b=h;g=0}if((e=d.css(b))&&e.length){f.css(b,e);d.css(b,g)}})};var b=c,g=
"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";b.fn.imagesLoaded=function(a){function c(){var f=b(s),d=b(l);h&&(l.length?h.reject(i,f,d):h.resolve(i));b.isFunction(a)&&a.call(e,i,f,d)}function d(a,d){if(!(a.src===g||b.inArray(a,w)!==-1)){w.push(a);d?l.push(a):s.push(a);b.data(a,"imagesLoaded",{isBroken:d,src:a.src});k&&h.notifyWith(b(a),[d,i,b(s),b(l)]);if(i.length===w.length){setTimeout(c);i.unbind(".imagesLoaded")}}}var e=this,h=b.isFunction(b.Deferred)?b.Deferred():0,
k=b.isFunction(h.notify),i=e.find("img").add(e.filter("img")),w=[],s=[],l=[];i.length?i.bind("load.imagesLoaded error.imagesLoaded",function(a){d(a.target,a.type==="error")}).each(function(a,c){var f=c.src,e=b.data(c,"imagesLoaded");if(e&&e.src===f)d(c,e.isBroken);else if(c.complete&&c.naturalWidth!==void 0)d(c,c.naturalWidth===0||c.naturalHeight===0);else if(c.readyState||c.complete){c.src=g;c.src=f}}):c();return h?h.promise(e):e};e.on("stippleDisappear",".stipple-dot-box",function(){var a=c(this);
if(a.is(":visible")){a.data("dotElement").removeClass("stipple-dot-type-close");a.removeClass("stipple-sticky").stippleDisappear()}});e.on("click",".stipple-dot-box a",function(a){var f=c(this).closest(".stipple-dot-box"),d=f.data("wrapper"),f=f.data("dotData"),b=d.data("photoData");y("dot:click",{photo_id:b.id,prototype_photo_id:b.prototype_image_id,photo_copy_group_id:b.photo_copy_group_id,photo_url:d.data("toolbarData").photoUrl,dot_id:f.id,dot_type:f.icon_type,link:a.currentTarget.href,account_id:b.entity_type+
":"+b.entity_id});return true});e.on("update:caption",".stipple-dottable-wrapper",function(a,f,d){a=c(this);a.data("photoData").caption=f;a.data("photoData").captioner_id=d;if(a.data("stippleMetadataBox")){d=a.data("stippleMetadataBox").find(".stipple-metadata-caption");f&&f.length?d.removeClass("stipple-hidden").addClass("stipple-metadata-container"):d.addClass("stipple-hidden").removeClass("stipple-metadata-container");d.show().html(f)}});e.on("stippleResize",'[class*="stippleit-sid-"]',function(){var a=
c(this),f,d,b,e,g;f=a.stippleWrapper();if(!f.length)return false;d=parseInt(a.getRealDimension("width"),10);b=parseInt(a.getRealDimension("height"),10);f.css({width:d,height:b});if(g=f.data("new_dot_container")){f.find(".stipple-new-dot").each(function(){var a=c(this),f,e,h,j;f=parseInt(a.css("left"),10)+i;e=parseInt(a.css("top"),10)+i;h=parseInt(g.find('input[name="image_width"]:first').val(),10);j=parseInt(g.find('input[name="image_height"]:first').val(),10);f=f*d/h;e=e*b/j;a.css({left:f-i,top:e-
i});g.find('input[name="dot[start_x]"]').val(f).end().find('input[name="dot[start_y]"]').val(e);a={pageX:a.offset().left+i,pageY:a.offset().top+g.height()/5};g.stipplePlaceNewDotContainer(a)});g.find('input[name="image_width"]').val(d).end().find('input[name="image_height"]').val(b)}e=f.data("photoData");a=f.data("toolbarData");f.data("toolbarData",c.extend({},a,{imageWidth:d,imageHeight:b}));f.find(".stipple-dot").each(function(){var a=c(this),f;f=a.data("dotData");a.css({left:f.start_x*d/e.image_width-
i,top:f.start_y*b/e.image_height-i})})});e.on("click",".stipple-shop",function(){var a=c(this),f,d,b;if(a.parent().hasClass("stipple-show-product-container")){d="photo";f=a.closest(".stipple-show-product-container").attr("data-stipple-product-id");a=a.stippleWrapper()}else{d="dot";b=a.closest(".stipple-dot-box-product");f=b.attr("data-product-id");a=b.data().wrapper;b=b.data("dotElement").data("dotData").id}y("product:shop",{product_id:f,dot_id:b,photo_id:a.data("photoData").id,prototype_photo_id:a.data("photoData").prototype_image_id,
photo_copy_group_id:a.data("photoData").photo_copy_group_id,photo_url:a.data("toolbarData").photoUrl,type:d,account_id:a.data("photoData").entity_type+":"+a.data("photoData").entity_id})})};ca=function(){var e=c(document);e.on("touchstart",".stipple-call-to-action",function(){var b=c(this),a=b.stippleWrapper(),f=a.offset(),d=b.stippleWrapper().data("stipple-metadataBox");a.find(".stipple-dot-type-close").not(b).trigger("touchstart");b.toggleClass("stipple-dot-type-close");b=a.data("photoData");if(!d){d=
c(h.metadata_box({photo:b,metadata:b.metadata,externalImgPath:"//stipple.cachefly.net/production/external/",JST:h}));a.data("stipple-metadataBox",d);d.data("stipple-wrapper",a);d.appendTo("body")}d&&d.toggleClass("stipple-sticky");if(d.is(":hidden")){d.stipplePlaceContainer({pageX:f.left+a.width()-d.width()-(v?80:65),pageY:f.top+(v?55:40)});y("photo:see-info",{photo_id:b.id,prototype_photo_id:b.prototype_image_id,photo_copy_group_id:b.photo_copy_group_id,photo_url:a.data("toolbarData").photoUrl,account_id:b.entity_type+
":"+a.data("photoData").entity_id})}else d.stippleDisappear();return false});var b=function(){var b=c(this).stippleWrapper(),a=b.find(".stipple-mobile-call-to-action"),f;a.toggleClass("stipple-active");f=b.find(".stipple-dot:not(.stipple-filtered), .stipple-call-to-action:not(.stipple-hidden)");if(a.hasClass("stipple-active")){a.stippleDisappear();f.stippleAppear()}else{b.find(".stipple-dot-type-close").trigger("touchstart");a.stippleAppear();f.stippleDisappear()}return false};e.on("touchstart",".stipple-mobile-call-to-action",
b);e.on("click",".stipple-mobile-overlay",b);e.on("touchstart",".stipple-dot:visible",function(){var b=c(this),a=b.stippleWrapper(),f=a.data("photoData"),d=b.data("dotData"),e=d.dot_type||"product",j=b.data("dotBox"),k=false;if(!j){j=c(h["dot_"+e]({JST:h,model:d.model,brand:d.brand,title:d.title,image_url:d.product_image,price:d.product_price,rental_price:d.product_rental_price,buy_now_link:d.buy_product_link,landing_link:d.landing_link,product_id:d.product_id,note:d.note,link:d.link,has_offer:d["has_offer?"],
has_product:d["has_product?"],staticHostname:"//stipple.cachefly.net/production",externalImgPath:"//stipple.cachefly.net/production/external/",helpers:A,inEditMode:a.data("wrapperMode")==="edit",userCanEdit:a.data("toolbarData").userCanEdit,prototype_image_id:d.prototype_image_id,campaigned:d["campaigned?"],link_data:d.link_data&&typeof d.link_data==="object"?d.link_data.data:void 0}));j.data("wrapper",a);j.data("dotData",d);j.data("dotElement",b);j.attr("data-stipple-dom-id",r);r=r+1;b.data("dotBox",
j);j.appendTo("body");k=true}a.find(".stipple-dot-type-close").not(b).trigger("touchstart");b.toggleClass("stipple-dot-type-close");j.toggleClass("stipple-sticky");if(j.hasClass("stipple-sticky"))if(k&&j.find(".stipple-embedded-image").length){c(".stipple-linked-image").imagesLoaded(function(){j.find(".stipple-embed-container").css("background-image","none");A.placeDotBox(j,b)});D({act:"dot:mouseover",id:d.id});y("dot:mouseover",{photo_id:f.id,prototype_photo_id:f.prototype_image_id,photo_copy_group_id:f.photo_copy_group_id,
photo_url:a.data("toolbarData").photoUrl,dot_id:d.id,dot_type:d.icon_type,link_service:d.link_data?d.link_data.name:"",account_id:a.data("photoData").entity_type+":"+a.data("photoData").entity_id})}else A.placeDotBox(j,b);else j.stippleDisappear()})};ba=function(){var e=c(document),b;b=".stipple-dot:visible:not(.stipple-fading)";e.on("mouseenter",b,function(){var a=c(this),f=a.stippleWrapper(),b=f.data("photoData"),e=a.data("dotData"),g=e.dot_type||"product",k=a.data("dotBox"),i=false;a.data("stipple-moused-over",
true);if(k){if(k.is(".stipple-sticky"))return a}else{k=c(h["dot_"+g]({JST:h,model:e.model,brand:e.brand,title:e.title,image_url:e.product_image,price:e.product_price,rental_price:e.product_rental_price,buy_now_link:e.buy_product_link,landing_link:e.landing_link,product_id:e.product_id,note:e.note,link:e.link,has_offer:e["has_offer?"],has_product:e["has_product?"],staticHostname:"//stipple.cachefly.net/production",externalImgPath:"//stipple.cachefly.net/production/external/",helpers:A,inEditMode:f.data("wrapperMode")===
"edit",userCanEdit:f.data("toolbarData").userCanEdit,prototype_image_id:e.prototype_image_id,campaigned:e["campaigned?"],link_data:e.link_data&&typeof e.link_data==="object"?e.link_data.data:void 0}));k.data("wrapper",f);k.data("dotData",e);k.data("dotElement",a);k.attr("data-stipple-dom-id",r);r=r+1;a.data("dotBox",k);k.appendTo("body");i=true}if(k.data("removeTimer")){clearTimeout(k.data("removeTimer"));k.removeData("removeTimer")}i&&k.find(".stipple-embedded-image").length?c(".stipple-linked-image").imagesLoaded(function(){k.find(".stipple-embed-container").css("background-image",
"none");A.placeDotBox(k,a)}):A.placeDotBox(k,a);D({act:"dot:mouseover",id:e.id});y("dot:mouseover",{photo_id:b.id,prototype_photo_id:b.prototype_image_id,photo_copy_group_id:b.photo_copy_group_id,photo_url:f.data("toolbarData").photoUrl,dot_id:e.id,dot_type:e.icon_type,link_service:e.link_data?e.link_data.name:"",account_id:f.data("photoData").entity_type+":"+f.data("photoData").entity_id})}).on("mouseleave",b,function(){var a=c(this),f=a.data("dotData"),b=a.data("dotBox");a.removeData("stipple-moused-over");
a.attr("src",n+z+f.image_file);if(b&&!b.is(".stipple-sticky")){a=G(b);b.data("removeTimer",a)}}).on("click",b,function(){var a=c(this),f=a.data("dotBox");a.toggleClass("stipple-dot-type-close");f.toggleClass("stipple-sticky");if(!f.is(".stipple-sticky")){a=G(f);f.data("removeTimer",a)}});e.on("click",".stipple-dot-edit-link",function(a){var f=c(this).closest(".stipple-dot-box").data("dotElement"),b=f.stippleWrapper(),e;if(e=b.data("new_dot_container")){if(e.is(":visible"))return true}else e=b.stippleCreateNewDotContainer();
f.addClass("stipple-updatable-dot").data("dotBox").stippleDisappear();e.stippleLoadDotIntoContainer(f,a);return false});b=".stipple-dot-box";e.on("mouseenter",b,function(){var a=c(this);if(a.data("removeTimer")){clearTimeout(a.data("removeTimer"));a.removeData("removeTimer")}}).on("mouseleave",b,function(){var a=c(this),f;if(a.is(".stipple-sticky"))return a;f=G(a);a.data("removeTimer",f)});b=".stipple-dottable-wrapper";e.on("mouseenter",b,function(){var a=c(this),f,b;a.addClass("stipple-active");
if(a.data("wrapperMode")==="edit"||a.data("disableForms"))return false;if(a.data("photoData")){f=a.data("photoData").id;a.find(".stipple-photo-top:not(.stipple-hidden), .stipple-photo-actions").stippleAppear();b=parseInt(a.data("photoData").dots_count,10);a.data("photoData").id&&(b>0||a.data("photoData").product_id)&&y("photo:mouseover",{location:m,photo_id:f,prototype_photo_id:a.data("photoData").prototype_image_id,photo_copy_group_id:a.data("photoData").photo_copy_group_id,photo_url:a.data("toolbarData").photoUrl,
dots_count:b,product_id:a.data("photoData").product_id,product_dot_count:a.data("photoData").product_dot_count,account_id:a.data("photoData").entity_type+":"+a.data("photoData").entity_id})}}).on("mouseleave",b,function(){var a=c(this),b=a.find(".stipple-photo-top");a.removeClass("stipple-active");if(a.data("wrapperMode")==="edit"||a.data("disableForms"))return false;a.find(".stipple-dot, .stipple-call-to-action").stop().animate({opacity:0},{queue:false,duration:200},"swing",function(){c(this).hide()}).end().find(".stipple-photo-actions").stippleDisappear();
b.stippleDisappear()}).on("click",b,function(a){var b=c(this),d,e,g;if(!STIPPLE.dot_template)return true;d=Math.round(a.pageX-b.offset().left);a=Math.round(a.pageY-b.offset().top);e={photo_id:b.data("photoData").id,image_width:b.data("toolbarData").imageWidth,image_height:b.data("toolbarData").imageHeight,act:"dot:create",dom_id:b.attr("data-stipple-dom-id")};e=c.extend(true,e,STIPPLE.dot_template);e.dot.start_x=d;e.dot.start_y=a;g=b.stippleWrapper().data("toolbarData").user?b.stippleWrapper().data("toolbarData").user.slug:
null;c(h.dot({creator_id:g})).css({position:"absolute",left:d-i,top:a-i,display:"block",width:"1px",height:"1px"}).removeClass("stipple-dot").addClass("stipple-new-dot").css("opacity",0).appendTo(b).fadeTo("fast",1);D(c.param(e));return false});e.on("click",".stipple-new-dot-overlay",function(a){var b=c(this),d=b.stippleWrapper(),e,g,k;g=d.data("new_dot_container");if(!d.stippleUserCanEdit()||d.data("wrapperMode")!=="edit"||d.children(".stipple-new-dot").length||g&&g.is(":visible"))return false;if(STIPPLE.dot_template)return true;
b.addClass("stipple-inactive");b=Math.round(a.pageX-d.offset().left);e=Math.round(a.pageY-d.offset().top);k=d.data("toolbarData").user?d.data("toolbarData").user.slug:null;c(h.dot({creator_id:k})).css({left:b-i,top:e-i}).removeClass("stipple-dot").addClass("stipple-new-dot").css("opacity",0).appendTo(d).fadeTo("fast",1);g||(g=d.stippleCreateNewDotContainer());g.find(".stipple-new-dot-chooser").children(":first").click();g.stippleUpdateFormCoordinates(b,e);g.find('[name="dot[product_id]"]').val(null);
g.stipplePlaceNewDotContainer(a);return false});e.on("mousemove",".stipple-dottable-wrapper [class*=stippleit-sid-], .stipple-dottable-wrapper .stipple-new-dot-overlay",function(a){var b=c(this),d=b.stippleWrapper();b.siblings(".stipple-dot:not(.stipple-fading,.stipple-filtered), .stipple-call-to-action:not(.stipple-hidden)").stop().stippleFadeToDistance(a.pageX-d.offset().left,a.pageY-d.offset().top)});e.on("click",".stipple-photo-action-tag:not(.stipple-active)",function(){var a=c(this),b=a.stippleWrapper();
y("photo:start_tagging",{photo_id:b.data("photoData").id,prototype_photo_id:b.data("photoData").prototype_image_id,photo_copy_group_id:b.data("photoData").photo_copy_group_id,photo_url:b.data("toolbarData").photoUrl,account_id:b.data("photoData").entity_type+":"+b.data("photoData").entity_id});if(b.data("disableForms")||a.is(".stipple-disabled"))return false;a.addClass("stipple-active");a.stippleEnableEditMode();return false});e.on("click",".stipple-photo-action-tag.stipple-active",function(){c(this).removeClass("stipple-active").stippleCancelEditMode();
return false});e.on("click",".stipple-dot-box-edit-toggler",function(){c(this).toggleClass("stipple-toggler-off stipple-toggler-on").closest(".stipple-dot-box").find(".stipple-dot-box-edit-drawer").toggle();return false});e.on("click",".stipple-dot-delete-link",function(){var a=c(this).closest(".stipple-dot-box"),b=a.data("wrapper");if(b.data("disableForms"))return false;if(confirm("Are you sure you want to delete tag '"+a.data("dotData").title+"'?")){b.stippleDisableForms();a.data("dotElement").attr("data-delete-dot-id",
a.data("dotData").id);D({act:"dot:delete",id:a.data("dotData").id,dom_id:b.attr("data-stipple-dom-id")})}return false});e.on("keyup",".stipple-new-dot-container",function(a){if(a.keyCode===27){c(this).find(".stipple-new-dot-cancel-button").click();return false}});e.on("click",".stipple-new-dot-edit-button",function(){c(this).closest("form").trigger("stipple:mode:create_product");return false});e.on("click",".stipple-new-dot-cancel-button",function(){var a=c(this).closest(".stipple-new-dot-container"),
b=a.data("wrapper");c(".stipple-autocomplete-box").hide();b.find(".stipple-photo-action-tag.stipple-active").removeClass("stipple-active");b.stippleCancelEditMode();a.removeData("stippleMode");return false});b=".stipple-new-product-dot-form";e.on("submit",b,function(a){var b=c(this);switch(b.data("stipple-mode")){case "showProduct":break;case "createProduct":a.stopImmediatePropagation();c(".stipple-validation-error").remove();c(".stipple-invalid").removeClass("stipple-invalid");a=b.stippleValidateForm();
if(a[0]===true)b.trigger("stipple:mode:preview_new_product");else{c.each(a[1],function(a,b){var c=b.el.prev("label");b.el.addClass("stipple-invalid");c.append('<span class="stipple-validation-error">* required</span>')});break}c("[data-stipple-empty-val]").blur();break;case "previewProduct":case "previewNewProduct":return true;default:a.stopImmediatePropagation()}return false}).on("stipple:mode:search_product stipple:mode:default",b,function(){var a=c(this);a.data("stipple-mode","searchProduct");
a.find(".stipple-default-hide").hide().siblings(".stipple-default-show").show().end().end().find(".stipple-product-fields").hide().filter(".stipple-product-dot-autocomplete-input-container").show()}).on("stipple:mode:create_product",b,function(a){var b=c(this),d=b.closest(".stipple-new-dot-container");b.data("stipple-mode","createProduct");c(".stipple-autocomplete-box:visible").stippleDisappear(0,function(){d.stipplePlaceNewDotContainer(a)});b.find(".stipple-new-dot-save-button").val("Preview").show().siblings(".stipple-new-dot-edit-button").hide().end().end().find(".stipple-product-fields").hide().filter(".stipple-product-specific-fields").show()}).on("stipple:mode:preview_product",
b,function(a,b,d){a=c(this);a.data("stipple-mode","previewProduct");d||(d=h.autocomplete_item_product({data:b}));a.find('[name="dot[product_id]"]').val(b.id).end().find(".stipple-selected-product").find("ul").empty().append(d).end().end().find(".stipple-new-dot-save-button").val("Save").show().focus().siblings(".stipple-new-dot-edit-button").hide().end().end().find(".stipple-product-fields").hide().filter(".stipple-selected-product").show()}).on("stipple:mode:show_product",b,function(a,b){var d=c(this);
d.trigger("stipple:mode:preview_product",b);d.find(".stipple-new-dot-save-button").hide().blur();d.data("stipple-mode","showProduct")}).on("stipple:mode:preview_new_product",b,function(){var a=c(this),b,d,e,g;a.data("stipple-mode","previewNewProduct");a.find("[data-stipple-empty-val]").each(function(){var a=c(this);a.attr("data-stipple-empty-val")===a.val()&&a.val("")});d=a.serializeArray();b=function(a){var b=c.grep(d,function(b){return b.name===a});return b.length?b[0].value:""};e=b("product[price]");
if(e.length){g=c("#stipple-new-product-currency option:selected").data("stipple-currency-symbol");e=g+e}b={image_url:b("product[image_url]"),name:b("product[name]"),brand:b("product[brand]"),price:e};b=h.autocomplete_item_product({data:b});a.find(".stipple-new-dot-save-button, .stipple-new-dot-edit-button").show().filter(".stipple-new-dot-save-button").val("Save").focus().end().end().find(".stipple-product-fields").hide().filter(".stipple-selected-product").empty().append(b).show()});b=".stipple-new-info-dot-form";
e.on("submit",b,function(a){var b=c(this),d;switch(b.data("stipple-mode")){case "fetch_link":break;case "preview_unlinked_dot":case "preview_linked_dot":a.stopImmediatePropagation();c("[data-stipple-empty-val]").blur();a=b.find('[name="dot[link]"]');d=b.data("stipple-saved-link");b.removeData("stipple-saved-link");if(a.is(".stipple-empty-input")||a.val()===""||d===a.val()){b.trigger("stipple:real_submit");break}else b.trigger("stipple:mode:fetch_link",a.val());break;default:a.stopImmediatePropagation();
a=b.find('input[name="dot[link]"]');a.is(".stipple-empty-input")||(d=a.val());if(!d||!d.length)b.trigger("stipple:real_submit");else if(/^(?:https?:\/\/|@)/.test(d))b.trigger("stipple:mode:fetch_link",d);else{a=b.find('input[name="dot[title]"]:not(.stipple-empty-input)').val();b.trigger("stipple:mode:preview_unlinked_dot",[null,a])}}return false}).on("stipple:mode:default",b,function(){var a=c(this);a.find(".stipple-link-previews").hide().empty().end().find(".stipple-default-empty").empty().end().find(".stipple-default-hide").hide().siblings(".stipple-default-show").show();
return a}).on("stipple:mode:fetch_link",b,function(a,b){var d=c(this),e=d.find(".stipple-fetching-link");d.data("stipple-mode","fetch_link");b=b||d.find('[name="dot[link]"]').val();c.ajax({url:n+z+"/external_embeds/message_handler",dataType:u?"jsonp":"json",data:{act:"link:fetch",url:b},beforeSend:function(){c(".stipple-link-previews").hide().empty();e.show()},success:function(a){e.hide();a.data&&a.data.data?d.trigger("stipple:mode:preview_linked_dot",[a.data.data.url,a.data.data]):d.trigger("stipple:mode:preview_unlinked_dot",
b)},error:function(){e.hide();d.trigger("stipple:mode:preview_unlinked_dot",b)}});return d}).on("stipple:mode:preview_unlinked_dot",b,function(a,b,d){var a=c(this),e=a.find('[name="dot[title]"]'),g=a.closest(".stipple-new-dot-container");a.data("stipple-mode","preview_unlinked_dot");e.parent().show();d&&d.length&&e.focus().val(d).blur();a.find(".stipple-dot-start-fields").hide();g.stipplePlaceNewDotContainer({pageX:g.offset().left-30,pageY:g.offset().top+g.height()/5});a.data("stipple-saved-link",
b);return a}).on("stipple:mode:preview_linked_dot",b,function(a,b,d){var a=c(this),e=a.find('[name="dot[title]"]'),g=a.find('[name="dot[note]"]'),k=a.closest(".stipple-new-dot-container");a.data("stipple-mode","preview_linked_dot");e.parent().show();d&&(d.title&&d.title.length)&&e.focus().val(d.title).blur();d&&(d.note&&d.note.length)&&g.focus().val(d.note).blur();a.find(".stipple-dot-start-fields").hide().end().find(".stipple-info-preview").empty().hide();if(b){a.data("stipple-saved-link",b);a.find('[name="dot[link]"]').val(b)}if(d){if(d.image){b=
new Image;b.onload=function(){k.stipplePlaceNewDotContainer({pageX:k.offset().left-30,pageY:k.offset().top+k.height()/5})};b.src=d.image}c.extend(d,{staticHostname:"//stipple.cachefly.net/production"});d=h["link_template_"+d.name.toLowerCase()]?h["link_template_"+d.name.toLowerCase()](d):h.link_template(d);c(".stipple-link-previews").empty().append(d).show();k.stipplePlaceNewDotContainer({pageX:k.offset().left-30,pageY:k.offset().top+k.height()/5})}return a});b=".stipple-new-dot-forms .stipple-form";
e.on("submit",b,function(){var a=c(this),b=a.closest(".stipple-new-dot-container");if(a.is(".stipple-new-product-dot-form")&&b.find(".stipple-autocomplete-box:visible").length)return false;a.trigger("stipple:real_submit")}).on("stipple:real_submit",b,function(){var a=c(this),b,d;d=a.closest(".stipple-new-dot-container");b=d.data("wrapper");if(b.data("disableForms"))return false;b.stippleDisableForms();a.find("[data-stipple-empty-val]").each(function(){var a=c(this);a.attr("data-stipple-empty-val")===
a.val()&&a.val("")});a=a.serialize();a=a+("&act="+encodeURIComponent(d.data("stippleMode")==="edit"?"dot:update":"dot:create"));a=a+("&dom_id="+b.attr("data-stipple-dom-id"));d.data("dotData")&&(a=a+("&id="+d.data("dotData").id));(b=b.data("photoData"))&&b.id&&(a=a+("&photo_id="+b.id));D(a);return false});e.on("paste",'input[name="dot[link]"]',function(){var a=c(this).closest("form");setTimeout(function(){a.submit()},100);return true});e.on("click",".stipple-link-data .stipple-edit-info-dot-link",
function(){c(this).closest("form").trigger("stipple:mode:preview_linked_dot");return false});e.on("click",".stipple-edit-info-dot-link",function(){var a=c(this).closest("form");a.find(".stipple-link-previews").length?a.trigger("stipple:mode:preview_linked_dot"):a.trigger("stipple:mode:preview_unlinked_dot");return false});e.on("click",".stipple-new-dot-chooser [data-stipple-new-dot-type]:not(.stipple-selected)",function(){var a=c(this);a.stippleSetDotFormType(a.attr("data-stipple-new-dot-type"))});
e.on("click",".stipple-publish-cancel",function(){c(this).stippleWrapper();return false});b="[data-stipple-empty-val]";e.on("focus",b,function(){var a=c(this);if(a.val()===a.attr("data-stipple-empty-val")){a.val("");a.removeClass("stipple-empty-input")}}).on("blur",b,function(){var a=c(this);if(c.trim(a.val())===""){a.val(a.attr("data-stipple-empty-val"));a.addClass("stipple-empty-input")}});var g=function(a,b,d){function e(){var b=a.val().replace(/^[%@]+/,"");c.ajax({url:n+z+"/"+i+"/"+encodeURIComponent(b),
data:l,dataType:u?"jsonp":"json",beforeSend:function(){if(a.is(":visible")){g.children().hide().filter(".stipple-autocomplete-ajax-loader").show();g.stippleAppear(function(){p.stipplePlaceNewDotContainer({pageX:p.offset().left-30,pageY:p.offset().top+p.height()/5})})}},success:function(b){var c;if(b.list&&b.list.length){c=".stipple-autocomplete-items";g.stippleNewAutoCompleteSuggestions(b.list,a.val().length,d);g.children().hide().filter(c).show();p.stipplePlaceNewDotContainer({pageX:p.offset().left-
30,pageY:p.offset().top+p.height()/5})}else{c=".stipple-autocomplete-no-results";if(g.is(":visible")&&a.is(":visible")){r==="product"?g.find(".stipple-autocomplete-add-product-button").show():g.find(".stipple-autocomplete-add-product-button").hide();g.children().hide().filter(c).show().find(".stipple-autocomplete-no-results-search-term").text(a.val());p.stipplePlaceNewDotContainer({pageX:p.offset().left-30,pageY:p.offset().top+p.height()/5})}}}})}var g=a.data("acBox"),h,i,l,m,r,p=a.closest(".stipple-new-dot-container");
i=d.urlFragment;l=d.requestData;m=d.completeCallback;h=d.acBoxElement;r=d.acType;if(!g){g=h||a.nextAll(".stipple-autocomplete-box:first");a.data("acBox",g);g.data("input",a);g.data("completeCallback",m)}if(a.val().length<2){g.is(":visible")&&g.stippleDisappear();if(q){clearTimeout(q);q=null}}else{h=g.find("li.stipple-selected");switch(b.keyCode){case 27:if(g.is(":visible")){g.stippleDisappear(function(){p.stipplePlaceNewDotContainer({pageX:p.offset().left-30,pageY:p.offset().top+p.height()/5})});
return false}return true;case 38:a.stippleUpArrowPressed();return false;case 40:a.stippleDownArrowPressed();return false;case 13:return false;case 9:if(h.is(".stipple-autocomplete-add-product"))return b.keyCode===9;h.length&&m(a,h);g.stippleDisappear(function(){p.stipplePlaceNewDotContainer({pageX:p.offset().left-30,pageY:p.offset().top+p.height()/5})});return b.keyCode===9}if(q){clearTimeout(q);q=null}q=setTimeout(e,1E3);return true}};c("input.stipple-product-autocomplete").live("keyup keydown",
function(a){var b,d;if(a.type==="keyup"&&a.keyCode!==9||a.type==="keydown"&&a.keyCode===9){b=c(this);d={};if(STIPPLE.entity_id)d.entity_id=STIPPLE.entity_id;else{d.entity_id=b.closest(".stipple-new-dot-container").data("wrapper").data("toolbarData").entity.id;d.entity_type="Brand"}return g(c(this),a,{urlFragment:"product_ac",requestData:d,acBoxElement:c(this).closest("form").find(".stipple-autocomplete-box:last"),acTemplate:"autocomplete_item_product",acType:"product",completeCallback:function(a,
b){var c=b.data("autocomplete");a.closest("form").trigger("stipple:mode:preview_product",c,b.clone())}})}});b=".stipple-autocomplete-box";e.on("focusin",b,function(){c(this).data("stipple-focused",true)}).on("focusout",b,function(){c(this).removeData("stipple-focused")});b=".stipple-autocomplete-item";e.on("mouseenter",b,function(){c(this).addClass("stipple-selected")}).on("mouseleave",b,function(){c(this).removeClass("stipple-selected")}).on("click",".stipple-autocomplete-box "+b,function(){var a=
c(this),b=a.closest(".stipple-autocomplete-box");if(!a.is(".stipple-autocomplete-add-product")){b.data("completeCallback")(b.data("input"),a);b.stippleDisappear()}return false});e.on("click",".stipple-autocomplete-add-product-button",function(){c(".stipple-new-dot-container").find(".stipple-new-product-dot-form").trigger("stipple:mode:create_product");return false});e.on("submit",".stipple-form",function(){return false});b=".stipple-call-to-action";e.on("click",b,function(){var a=c(this),b=a.stippleWrapper().data("stipple-metadataBox");
a.toggleClass("stipple-dot-type-close");b.length&&b.toggleClass("stipple-sticky");return false}).on("mouseenter",b,function(){var a=c(this).stippleWrapper(),b=a.offset(),d;if(d=a.data("stipple-metadataBox")){if(d.data("removeTimer")){clearTimeout(d.data("removeTimer"));d.removeData("removeTimer")}}else{d=a.data("photoData");d=c(h.metadata_box({photo:d,metadata:d.metadata,externalImgPath:"//stipple.cachefly.net/production/external/",JST:h}));a.data("stipple-metadataBox",d);d.data("stipple-wrapper",
a);d.appendTo("body")}d.stipplePlaceContainer({pageX:b.left+a.width()-d.width()-(v?80:65),pageY:b.top+(v?55:40)});y("photo:see-info",{photo_id:a.data("photoData").id,prototype_photo_id:a.data("photoData").prototype_image_id,photo_copy_group_id:a.data("photoData").photo_copy_group_id,photo_url:a.data("toolbarData").photoUrl,account_id:a.data("photoData").entity_type+":"+a.data("photoData").entity_id});return false}).on("mouseleave",b,function(){var a=c(this),b;if(a.hasClass("stipple-dot-type-close"))return false;
a=a.stippleWrapper().data("stipple-metadataBox");b=G(a);a.data("removeTimer",b);return false});b=".stipple-metadata-box";e.on("mouseenter",b,function(){var a=c(this);a.data("stipple-wrapper").trigger("mouseleave");if(a.data("removeTimer")){clearTimeout(a.data("removeTimer"));a.removeData("removeTimer")}}).on("mouseleave",b,function(){var a=c(this),b;if(a.hasClass("stipple-sticky"))return true;b=G(a);a.data("removeTimer",b)})};R=function(){var e=function(){for(var b=window._stippleq,c;b.length;){c=
b.shift();STIPPLE[c[0]].apply(this,c.slice(1))}};c(function(){c("meta#stipple-loaded").length||c('<meta id="stipple-loaded" property="stipple:loaded" content="true">').appendTo("head");var b=window._stippleq;c(h.external_css({externalImgPath:"//stipple.cachefly.net/production/external/"})).appendTo("head");c(h.external_css_ie({})).appendTo("head");c(h.external_css_ie7({})).appendTo("head");$();if(b){b.proto_push=b.push;b.push=function(b){var a=Array.prototype.slice.call(b,0);STIPPLE[a[0]].apply(this,
a.slice(1));e();return b}}b&&b.length?e():P(X());aa();v?ca():ba();Z()})};S=function(e,b){var g,a,f,d,h;if(b&&typeof b==="object"){if(g=b.selector)g=typeof g==="string"?c(g+":not(.stipple-nowrap)"):g;else{d=parseInt(b.minWidth,10)||200;h=parseInt(b.minHeight,10)||200;g=c("img").not('.stipple-nowrap, .stipple-embed, [src*="googleapis.com"], [src*="maps.gstatic.com"]').filter(function(){var a=c(this),b;b=parseInt(a.getRealDimension("width"),10);a=parseInt(a.getRealDimension("height"),10);return b>=d&&
a>=h}).map(function(){var a=c(this);return a.parent().is("a")?a.parent().get(0):this})}b.beforeAll&&b.beforeAll(g);if(b.afterAll){a=(new Date).getTime().toString()+Math.floor(Math.random()*1E3);E[a]={callback:b.afterAll,stillLoading:g.length};g.each(function(){f=(f=c(this).data("stipple-callbackBatches"))||{};f[a]=1;c(this).data("stipple-callbackBatches",f)})}}g.addClass("stippleit-sid-"+e.id);L=b.afterWrap;P(g.map(function(){return c(this)}),b.user_filter)};STIPPLE.addCallbacks=function(e,b){c.each(b,
function(b,a){STIPPLE.callbacks[e][b].register(a)})};STIPPLE.load=function(e,b){b||(b={});typeof e==="string"&&(e={id:e,type:"Site"});if(STIPPLE.loaded_entity&&!b.forceEntityLoad&&(STIPPLE.loaded_entity.type!==e.type||STIPPLE.loaded_entity.id!==e.id))typeof console==="object"&&console.log&&console.log("Stipple received a message to load "+e.type+"|"+e.id+", but already has loaded "+STIPPLE.loaded_entity.type+"|"+STIPPLE.loaded_entity.id);else{STIPPLE.loaded_entity=e;if(b.hasOwnProperty("useJSONP"))u=
b.useJSONP;if(b.hasOwnProperty("showPhotoActions"))B=b.showPhotoActions;if(b.hasOwnProperty("plugin"))C=b.plugin;x=typeof b.showCTA==="boolean"?b.showCTA:true;l=typeof b.showMobileDotsByDefault==="boolean"?b.showMobileDotsByDefault:false;typeof c==="undefined"?setTimeout(function(){STIPPLE.load(e,b)},40):document.readyState==="complete"?S(e,b):c(function(){J()&&document.readyState!=="complete"?setTimeout(arguments.callee,100):S(e,b)})}};m=/\bSafari\b/.test(navigator.userAgent)?A.utf8Encode(location.href):
location.href;if(A.isMobileBrowser()){v=true;i=23}(function(){var e,b;if(typeof jQuery!=="undefined"&&jQuery.fn.jquery==="1.8.2"){c=jQuery.sub();R(c)}else{e=document.createElement("script");e.src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js";document.documentElement.getElementsByTagName("HEAD")[0].appendChild(e);b=setInterval(function(){if(typeof jQuery!=="undefined"&&jQuery.fn.jquery==="1.8.2"){clearInterval(b);c=jQuery.noConflict(true);V(c)&&R(c)}},25)}})()}());
